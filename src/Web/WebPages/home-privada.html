<!doctype html>
<html class="no-js" lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content="TODO">
	<meta name="description" content="home privada">
	<meta name='copyright' content='TODO'>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>Inicio</title>
	<link rel="icon" href="img/favicon.png">
	<link href="https://fonts.googleapis.com/./css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="./css/nice-select.css">
	<link rel="stylesheet" href="./css/font-awesome.min.css">
	<link rel="stylesheet" href="./css/icofont.css">
	<link rel="stylesheet" href="./css/slicknav.min.css">
	<link rel="stylesheet" href="./css/owl-carousel.css">
	<link rel="stylesheet" href="./css/datepicker.css">
	<link rel="stylesheet" href="./css/animate.min.css">
	<link rel="stylesheet" href="./css/magnific-popup.css">

	<link rel="stylesheet" href="./css/normalize.css">
	<link rel="stylesheet" href="./css/style.css">
	<link rel="stylesheet" href="./css/responsive.css"> 

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

	<script src="./js/services/entidadesController.js"></script>
	<script src="./js/services/FAQSController.js"></script>
	<script src="./js/services/testimoniosController.js"></script>

	<script type="module" src="../Components/modalPanel/modalPanel.js"></script>
	<script src="./js/libraries/header.js"></script>
	<script src="./js/libraries/footer.js"></script>

	<style>

        .video-image {
            background-image: url(img/videoImage.png);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 350px;
            position: relative;
        }

        /*=======================
			Start Fun Facts CSS
		=========================*/
        .fun-facts {
            position: relative;
        }

            .fun-facts.section {
                padding: 120px 0;
            }

        .fun-facts {
            background: url('img/fun-bg.jpg');
            background-size: cover;
            background-repeat: no-repeat;
        }

            .fun-facts .single-fun {
            }

                .fun-facts .single-fun i {
                    background-color: #1a76d1;
                    position: absolute;
                    left: 0;
                    font-size: 62px;
                    color: white;
                    height: 70px;
                    width: 70px;
                    line-height: 67px;
                    font-size: 28px;
                    text-align: center;
                    padding: 0;
                    margin: 0;
                    border: 2px solid #fff;
                    border-radius: 0px;
                    top: 50%;
                    margin-top: -35px;
                    -webkit-transition: all 0.4s ease;
                    -moz-transition: all 0.4s ease;
                    transition: all 0.4s ease;
                    border-radius: 50%;
                }

                .fun-facts .single-fun:hover i {
                    color: white;
                    background: goldenrod;
                    border-color: transparent;
                    cursor: pointer;
                }

                .fun-facts .single-fun .content {
                    padding-left: 80px;
                }

                .fun-facts .single-fun span {
                    color: #1a76d1;
                    font-weight: 600;
                    font-size: 30px;
                    position: relative;
                    display: block;
                    -webkit-transition: all 0.4s ease;
                    -moz-transition: all 0.4s ease;
                    transition: all 0.4s eas;
                    display: block;
                    margin-bottom: 7px;
                }

                .fun-facts .single-fun p {
                    color: black;
                    font-size: 15px;
                }
                .fun-facts .single-fun span:hover {
                    color: goldenrod; 
					cursor:pointer;
                }

		.section-title {
			text-align: center;
			margin-bottom: 60px;
			padding: 0 125px;
		}

		.pricing-table .btn:before {
			background-color: goldenrod;
		}

		body {
			font-family: 'Arial', sans-serif;
		}

		.panel {
			background-color: #f8f8f8;
			border: 1px solid #ddd;
			margin-bottom: 10px;
			border-radius: 5px;
			/* overflow: hidden; es clave aquí para que el max-height funcione con el contenido */
			overflow: hidden;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		.pregunta {
			padding: 15px;
			cursor: pointer;
			background-color: #3498db;
			color: #fff;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.respuesta {
			padding: 0 15px; /* Padding vertical inicial de 0 para empezar la transición */
			text-align: left;
			/* CERO VISIBILIDAD INICIAL */
			max-height: 0;
			/* TRANSICIÓN CLAVE */
			/* Anima el max-height y el padding vertical */
			transition: max-height 0.4s ease-out, padding 0.4s ease-out;
		}

		/* Estado de la respuesta cuando el panel está activo/abierto */
		.panel.activo .respuesta {
			/* Al abrir, el JS se encarga de establecer dinámicamente el max-height */
			/* max-height: 500px; ya no es necesario aquí */
			/* Devolvemos el padding para que el contenido tenga espacio */
			padding-top: 15px;
			padding-bottom: 15px;
		}

		@media (max-width: 600px) {
			.pregunta {
				font-size: 16px;
			}
		}

		respuesta {
			padding: 0 15px; /* Padding vertical inicial de 0 para empezar la transición */
			text-align: left;
			/* CERO VISIBILIDAD INICIAL */
			max-height: 0;
			/* TRANSICIÓN CLAVE */
			/* Anima el max-height y el padding vertical */
			transition: max-height 0.4s ease-out, padding 0.4s ease-out;
		}

		/* Estado de la respuesta cuando el panel está activo/abierto */
		.panel.activo .respuesta {
			/* Al abrir, el JS se encarga de establecer dinámicamente el max-height */
			/* max-height: 500px; ya no es necesario aquí */
			/* Devolvemos el padding para que el contenido tenga espacio */
			padding-top: 15px;
			padding-bottom: 15px;
		}

		@media (max-width: 600px) {
			.pregunta {
				font-size: 16px;
			}
		}

		.flecha {
			font-size: 20px;
		} 

		.modal-contenido {
			/* Por defecto */
			opacity: 0;
			transform: scale(0.7);
			transition: opacity 0.3s ease-out, transform 0.3s ease-out;
		}

		/* 2. Define el estado final (mostrado) */
		.modal.mostrar .modal-contenido {
			opacity: 1;
			transform: scale(1);
		}

        .single-table-parent :hover {
            background-color: aliceblue;
            border: 1px #1A76D1 solid;
        }

        .single-table :hover {
            background-color: aliceblue;
            border: 0;
        }

        .pricing-table .btn { 
            width: 100%;
            color: #fff;
        }

	</style>

</head>
<body>

	<div class="preloader">
		<div class="loader">
			<div class="loader-outter"></div>
			<div class="loader-inner"></div>

			<div class="indicator">
				<svg width="16px" height="12px">
					<polyline id="back" points="1 6 4 6 6 11 10 1 12 6 15 6"></polyline>
					<polyline id="front" points="1 6 4 6 6 11 10 1 12 6 15 6"></polyline>
				</svg>
			</div>
		</div>
	</div>

	<header id="headerHomePrivada" class="header"></header>
	<script>
		 
		(async () => {
			await renderHeader('home', 'headerHomePrivada');
			await setUserData(); 
		})()
	</script>

	<div class="container">
		<div class="row ">
			<div class="col-lg-6 col-12">
				<modal-panel id="modalPanel-InAPp"></modal-panel>
			</div>
		</div>
	</div>

	<script>
         
		let currentInAppNotification = null;
		let moreInAPps = false;
		let idUsuario = localStorage.getItem('idUsuario');

		//if (!idUsuario) {
		//	//alert("No hay idUsuario en localStorage");
		//	//return;
		//}

		document.addEventListener("DOMContentLoaded", async () => {

			//localStorage.setItem('idUsuario', String(1));
			await revisarYMostrarNotificaciones(idUsuario);
		});

		document.querySelector('modal-panel')
			.addEventListener('confirm', async (e) => {

				//alert(currentInAppNotification.id);
				var result = await actualizarNotificacionComoLeida(currentInAppNotification);
				await delay(1500);

				const nuevaLista = await cargarNotificaciones(idUsuario);
				//if (nuevaLista.length > 0) { moreInAPps = true; }

				moreInAPps = nuevaLista.length > 0;

				if (result && moreInAPps) {
					await revisarYMostrarNotificaciones(idUsuario);
				}
			});

		async function cargarNotificaciones(idUsuario) {

			const baseUrl = `https://localhost`;
			const controllerName = `InAppNotification`;
			const port = `44311`;
			const apiUrl = `${baseUrl}:${port}/${controllerName}/FiltrarInAppNotifications`;

			const url = `${apiUrl}?filters.IdUsuario=${idUsuario}&filters.Activo=true&orderBy=fechaCreacion&descending=false`;

			const response = await fetch(url, {
				method: "GET",
				//redentials: "include",
				headers: { "Content-Type": "application/json" }
			});

			if (!response.ok) {
				console.error("Error al obtener notificaciones", response.status);
				return [];
			}

			const data = await response.json();
			const lista = data.items;
			return lista;
		}

		async function delay(ms) {
			return new Promise(resolve => setTimeout(resolve, ms));
		}

		async function revisarYMostrarNotificaciones(idUsuario) {
			const lista = await cargarNotificaciones(idUsuario);

			moreInAPps = lista.length > 0;

			if (!lista || lista.length === 0) return;

			//if (lista.length > 1) { moreInAPps = true; }

			const inApp = lista[0];
			currentInAppNotification = inApp;
			await delay(1500);
			await mostrarModal(inApp.titulo, inApp.mensaje);
		}

		async function mostrarModal(titulo, mensaje) {
			const modal = document.getElementById("modalPanel-InAPp");
			modal.setContent(titulo, mensaje, "info");
			modal.mostrar();
		}

		async function actualizarNotificacionComoLeida(notificacion) {
			// Definición de la URL y EndPoint
			const baseUrl = `https://localhost`;
			const controllerName = `InAppNotification`;
			const port = `44311`;
			// Endpoint: [HttpPut("ActualizarInAppNotification")]
			const apiUrl = `${baseUrl}:${port}/${controllerName}/ActualizarInAppNotification`;

			// Prepara el objeto para el cuerpo de la petición
			// Creamos una copia del objeto y configuramos 'activo' a false
			const notificacionActualizada = {
				...notificacion, // Copia todas las propiedades existentes (incluido el 'id')
				activo: false     // Marcamos como inactiva/leída
			};

			try {
				const response = await fetch(apiUrl, {
					method: "PUT", // Usamos el método PUT como indica el controlador
					headers: {
						"Content-Type": "application/json"
					},
					// Enviamos el objeto actualizado como JSON en el cuerpo
					body: JSON.stringify(notificacionActualizada)
				});

				if (!response.ok) {
					console.error(`Error al actualizar notificación ${notificacion.id}:`, response.status, await response.text());
					return false;
				}

				// Si el estado HTTP es 200-299, consideramos que fue exitoso
				console.log(`Notificación ${notificacion.id} actualizada a activo=false.`);
				return true;

			} catch (error) {
				console.error("Error al actualizar la notificación:", error);
				return false;
			}
		}

	</script>

	<section class="newsletter section " style="padding: 50px 0;">
		<div class="container">
			<div class="row ">
				<div class="col-lg-12  col-12">
				</div>
			</div>
		</div>
	</section>
	<div id="fun-facts" class="fun-facts section" style="padding: 100px 0;">
		<div class="container">
			<div class="row">
				<div class="col-lg-2 col-md-2 col-2">
				</div>
				<div class="col-lg-3 col-md-3 col-3">
					<div class="single-fun">
						<i class="icofont icofont-heart-alt"></i>
						<div class="content">
							<div class="row">
								<p style="padding-left: 10px;">Sigues a </p>
								<span style="padding-left: 10px; padding-right: 10px;" id="entidadesUsuario" class="counter">0</span>
								<p> Entidades</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-2 col-md-2 col-2">
				</div>
				<div class="col-lg-3 col-md-3 col-3">
					<div class="single-fun">
						<i class="icofont icofont-money-bag"></i>
						<div class="content">
							<div class="row">
								<p style="padding-left: 10px;">Tienes </p>
								<span style="padding-left: 10px; padding-right: 10px;" id="puntoUsuario" class="counter">0</span>
								<p> Puntos</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-2 col-md-2 col-2">
				</div>
			</div>
		</div>
	</div>

	<script>
		async function getUserData() {

			const baseUrl = `https://localhost`;
			const controllerName = `Usuarios`;
			const port = `44311`;
			const apiUrl = `${baseUrl}:${port}/${controllerName}/FiltrarUsuarios`;

			const url = `${apiUrl}?filters.Id=${idUsuario}&filters.Activo=true`;

			const response = await fetch(url, {
                cache: 'no-store',
				method: "GET",
				//redentials: "include",
				headers: { "Content-Type": "application/json" }
			});

			if (!response.ok) {
				console.error("Error al obtener el usuario", response.status);
			}
			const data = await response.json();

			if (data != null && data.length > 0 && data[0] != null) {
				return data[0];
			}
			return null;
		}

		function actualizarPuntos() {
			getUserData().then(user => {
				const puntoElemento = document.getElementById('puntoUsuario');
				if (puntoElemento && typeof user.puntos !== 'undefined') {
					puntoElemento.textContent = user.puntos;
				}
			});
		}

		// Observar cuando la sección #fun-facts entra en pantalla
		const seccion = document.getElementById('fun-facts');
		if (seccion) {
			const observer = new IntersectionObserver((entries) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) { // la sección está visible
						actualizarPuntos();
					}
				});
			}, { threshold: 0.1 }); // 10% visible
			observer.observe(seccion);
		}
	</script>

	<section class="newsletter section">
		<div class="container">
			<div class="row ">
				<div class="col-lg-6  col-12">
					<div class="subscribe-text ">
						<h6>Explora tu entorno</h6>
						<p style="color:white" class="">Descubre entidades cercanas y explora todo lo que ofrecen.</p>
					</div>
				</div>
				<div class="col-lg-6  col-12">
					<div class="subscribe-form ">
						<div class="newsletter-inner">
							<input id="textEntidad" name="textEntidad" placeholder="Buscar entidad" class="common-input" onfocus="this.placeholder = ''"
								   onblur="this.placeholder = 'Buscar entidad'" type="text">
							<button id="btnBuscarEntidad" class="btn" onclick="redirigirExplorar()">BUSCAR</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<script>

		function redirigirExplorar() {
			const textEntidadValue = document.getElementById('textEntidad').value;
			if (textEntidadValue.trim() == '') {
				alert('Por favor, ingresa un valor válido para la búsqueda.');
			}
			else {
				window.location.href = `explorar.html?name=${encodeURIComponent(textEntidadValue)}`;
			}
		}
	</script>

	<section class="pricing-table section">
		<div class="container"> 
			<div class="row" >
				<div class="col-lg-6 col-md-12 col-12 single-table-parent">
					<div class="single-table" style="cursor: pointer;">
						<div class="table-head">
							<div class="icon">
								<i class="icofont icofont-briefcase"></i>
							</div>
							<h4 class="title">Comercios y locales</h4>
						</div>
						<p style="margin: 30px 0px; color: black;">Establecimientos dedicados a la venta de productos o servicios, orientados a satisfacer necesidades locales.</p>
						<div class="table-bottom">	
							<a style=" min-height: 50px;" id="buscarComercios" class="btn" href="explorar.html?type=64569dd3-4d65-4eed-9f41-ea87b2270a6c">EXPLORAR COMERCIOS</a>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-md-12 col-12 single-table-parent">
					<div class="single-table" style="cursor: pointer;">
						<div class="table-head">
							<div class="icon">
								<i class="icofont icofont-group"></i>
							</div>
							<h4 class="title">Asociaciones Culturales</h4>
						</div>
						<p style="margin: 30px 0px; color: black;">Entidades sin ánimo de lucro que agrupan personas con intereses comunes y fines sociales o culturales.</p>
						<div class="table-bottom">
							<a style=" min-height: 50px;" id="buscarAsociaciones" class="btn" href="explorar.html?type=e170a0db-660f-4c34-ae71-3e9b9dbbd92b">EXPLORAR ASOCIACIONES</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="Feautes section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title" style="padding-top: 60px;">
						<h2>Descubre entidades en tu barrio y crea nuevas conexiones</h2>
						<!--<img src="img/section-img.png" alt="#">
				<p>Lorem ipsum dolor sit amet consectetur adipiscing elit praesent aliquet. pretiumts</p>-->
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-4 col-12">
					<div class="single-features">
						<div class="signle-icon">
							<i class="icofont-link"></i>
						</div>
						<h3>Conecta</h3>
						<p style=" color: black;">Conecta con locales y personas de tu barrio de forma directa y sencilla.</p>
					</div>
				</div>
				<div class="col-lg-4 col-12">
					<div class="single-features">
						<div class="signle-icon">
							<i class="icofont-eye-open"></i>
						</div>
						<h3>Reconoce</h3>
						<p style=" color: black;">Mira tu entorno con otros ojos y redescubre el valor de lo local y lo cercano.</p>
					</div>
				</div>
				<div class="col-lg-4 col-12">
					<div class="single-features last">
						<div class="signle-icon">
							<i class="icofont-home"></i>
						</div>
						<h3>Cerca de casa</h3>
						<p style=" color: black;">Todo lo que te interesa está más cerca de lo que imaginas, a solo unos pasos de ti.</p>
					</div>
				</div>
			</div>
		</div>
	</section>

	<div id="fun-facts" class="fun-facts section overlay">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont icofont-home"></i>
						<div class="content">
							<span style="color: white;" class="counter">74</span>
							<p style="color: white;" >Entidades asociadas</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont icofont-user-alt-3"></i>
						<div class="content">
							<span style="color: white;"  class="counter">340</span>
							<p style="color: white;" >Usuarios activos</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont-heart-alt"></i>
						<div class="content">
							<span style="color: white;"  class="counter">600</span>
							<p style="color: white;" >Conexiones</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont icofont-table"></i>
						<div class="content">
							<span style="color: white;"  class="counter">120</span>
							<p style="color: white;" >Actividades</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<section class="why-choose section">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-12">
					<div class="choose-left">
						<h3>¿Cómo encontrar promociones?</h3>
						<p style="color: black;">Encuentra promociones y descuentos mientras exploras los comercios y actividades de tu entorno de forma sencilla.</p>
						<p style="color: black;">Navega por la plataforma, descubre entidades locales y accede a ofertas especiales pensadas para ti.</p>
						<div class="row">
							<div class="col-lg-12">
								<ul class="list">
									<li><i class="fa fa-caret-right"></i>   Explora comercios y actividades cercanas desde un solo lugar</li>
									<li><i class="fa fa-caret-right"></i>   Consulta catalogos y descubre promociones y descuentos activos</li>
									<li><i class="fa fa-caret-right"></i>   Aprovecha ofertas locales de manera directa</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-12">
					<div class="choose-right">
						<div class="video-image">
							<div class="promo-video">
								<div class="waves-block">
									<div class="waves wave-1"></div>
									<div class="waves wave-2"></div>
									<div class="waves wave-3"></div>
								</div>
							</div>

							<a href="https://www.youtube-nocookie.com/embed/h0DJkZEgZpA?autoplay=1&rel=0" class="video video-popup mfp-iframe"><i class="fa fa-play"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="call-action overlay" data-stellar-background-ratio="0.5">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-12">
					<div class="content">
						<h2 style="margin-bottom:30px">Suscríbete a nuestra newsletter</h2>
						<p>Para enterarte de ofertas, promociones y mucho más</p>
						<div onclick="suscribirme()" id="btnActivarSuscripcion" class="button">
							<a href="#" class="btn">QUIERO SUSCRIBIRME</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<script>

				(async () => {

					const suscripcionU = localStorage.getItem("suscripcion");
				if (suscripcionU != undefined && suscripcionU != null && (suscripcionU == 'true' || suscripcionU == true)) {
					document.getElementById("btnActivarSuscripcion").style.visibility = "hidden";
						//alert("El usuario ya está suscrito (Local Storage)!");
					}
				else {
					document.getElementById("btnActivarSuscripcion").style.visibility = "visible";
					}

				})()

				async function activarSuscripcion(email) {

					const baseUrl = `https://localhost`;
				const controllerName = `Usuarios`;
				const port = `44311`;
				const apiUrl = `${baseUrl}:${port}/${controllerName}/ActivacionSuscripcionWeb`;

				// IMPORTANT → parámetros en query string
				const url = `${apiUrl}?email=${encodeURIComponent(email)}`;

				const response = await fetch(url, {
					method: "PATCH",
				headers: {"Content-Type": "application/json" }
					});

				if (!response.ok) {
					console.error("Error activando suscripción", response.status);
				return false;
					}

				const resultado = await response.json();
				return resultado;
				}

				async function suscribirme() {

					const suscripcionUser = localStorage.getItem("suscripcion");

					if (suscripcionUser != undefined && suscripcionUser != null && suscripcionUser == true) {

						ocultarBotonSuscripcion();
						console.info("El usuario ya está suscrito (Local Storage)!");
						return;
					}
					else {
						//const token = "BA03E160-11C9-4A7D-BF5D-9DF60140F893";
						//const email = "dgomezma+admin@gmail.com";
						//const loggedUserId = localStorage.getItem("idUsuario");

						var loggedUser = await getUserData();

						if (loggedUser.suscrito == null || loggedUser.suscrito == false) {

							const ok = await activarSuscripcion(loggedUser.correo);
							//TODO: Mostrar MODAL-PANEL (Componente Web)
							if (ok) {
								ocultarBotonSuscripcion();
                                console.info("¡Suscripción activada correctamente!");
							}
							else
							{
                                console.error("No se ha podido activar la suscripción.");
							}
						}
						else
						{
							ocultarBotonSuscripcion();
                            console.info("El usuario ya está suscrito (Base de Datos)!");
						}
					}
				}

				async function ocultarBotonSuscripcion() {

					document.getElementById("btnActivarSuscripcion").style.visibility = "hidden";
				}


	</script>

	<section class="portfolio section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h2>Los mejores servicios y productos están muy cerca de ti.</h2>
						<img src="img/logo.jpg" alt="#" style="margin-top: 20px; margin-bottom: 20px;">
						<p>Encuentra aquello que estabas buscando.</p>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12 col-12">
					<div id="panelImages" class="owl-carousel portfolio-slider">


					</div>
				</div>
			</div>
		</div>
	</section>
	<script>

		const imagenes = [
		'foto1.jpg',
		'foto2.jpg',
		'foto3.jpg',
		'foto4.jpg',
		'foto5.jpg',
		'foto6.jpg',
		'foto7.jpg',
		'foto8.jpg'
		];

		for (const url of imagenes) {

			// Crear elementos HTML con JavaScript
			const singlePfDiv = document.createElement('div');
			singlePfDiv.className = 'single-pf';

			const image = document.createElement('img');
			image.src = 'img/fotos/' + url;
			image.alt = '#';

			const detailsLink = document.createElement('a');
			detailsLink.href = 'explorar.html';
			detailsLink.className = 'btn';
			detailsLink.textContent = 'Ver más';
		 
			singlePfDiv.style.height = "275px"; 
			singlePfDiv.appendChild(image);
			singlePfDiv.appendChild(detailsLink);

			// Agregar el contenedor al cuerpo del documento
			document.getElementById("panelImages").appendChild(singlePfDiv);
		}

	</script>

	<section class="services section">
		<div class="container">
			<div class="row">
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-book-alt"></i>
						<h4><a>Descubre</a></h4>
						<p>Explora comercios, servicios y actividades de tu entorno. Encuentra lugares y personas que forman parte de tu día a día.</p>
					</div>
				</div>

				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-location"></i>
						<h4><a>De proximidad</a></h4>
						<p>Conecta con iniciativas locales y apoya el comercio cercano. Todo lo que necesitas, a pocos pasos de casa.</p>
					</div>
				</div>

				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-heart-alt"></i>
						<h4><a>Aprecia tu barrio</a></h4>
						<p>Redescubre tu barrio desde otra perspectiva y valora lo que lo hace único: su gente, sus espacios y su historia.</p>
					</div>
				</div>

				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-groups-alt"></i>
						<h4><a>Participa</a></h4>
						<p>Comparte, colabora y forma parte activa de la comunidad. Tus aportaciones ayudan a construir un barrio mejor.</p>
					</div>
				</div>

				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-screen"></i>
						<h4><a>Desde tu dispositivo</a></h4>
						<p>Accede a la plataforma de forma rápida y sencilla desde tu móvil, tablet u ordenador, cuando quieras.</p>
					</div>
				</div>

				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-user"></i>
						<h4><a>Tu perfil</a></h4>
						<p>Crea tu perfil, guarda tus favoritos y personaliza tu experiencia para sacarle el máximo partido a la plataforma.</p>
					</div>
				</div>

			</div>
		</div>
	</section>

	<section>
		<div class="services section">
			<div class="container">
				<div class="col-lg-12">
					<h2 style="margin-bottom: 50px">¿Tienes dudas?</h2>
					<div id="FAQS"> </div>
				</div>
			</div>
		</div>
	</section>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
	<script>

		// Función para generar dinámicamente el código HTML de un panel FAQ
		function crearPanel(id, pregunta, respuesta) {
			const panel = document.createElement('div');
			panel.className = 'panel';
			panel.setAttribute('data-index', id - 1);

			const preguntaDiv = document.createElement('div');
			preguntaDiv.className = 'pregunta';
			preguntaDiv.innerHTML = `<span>${pregunta}</span><i class="fas fa-chevron-down flecha"></i>`;

			preguntaDiv.addEventListener('click', function () {
				const panelIndex = parseInt(panel.getAttribute('data-index'));
				togglePanel(panelIndex);
			});

			const respuestaDiv = document.createElement('div');
			respuestaDiv.className = 'respuesta';
			respuestaDiv.textContent = respuesta;

			panel.appendChild(preguntaDiv);
			panel.appendChild(respuestaDiv);

			document.getElementById("FAQS").appendChild(panel);
		}

		// Función para cambiar la visibilidad de un panel con animación
		function togglePanel(panelIndex) {
			const panels = document.querySelectorAll('.panel');
			const panel = panels[panelIndex];
			const respuesta = panel.querySelector('.respuesta');
			const flecha = panel.querySelector('.flecha');

			const estaActivo = panel.classList.contains('activo');
			panel.classList.toggle('activo');

			let paddingOffsetpx = 15;
			// Controla la animación y el icono del panel clickeado
			if (!estaActivo) {
				// Al abrir
				respuesta.style.maxHeight = respuesta.scrollHeight + paddingOffsetpx * 2 + "px";
				flecha.classList.remove('fa-chevron-down');
				flecha.classList.add('fa-chevron-up');
			} else {
				// Al cerrar
				respuesta.style.maxHeight = respuesta.scrollHeight + "px";
				setTimeout(() => {
					respuesta.style.maxHeight = '0';
				}, 10);

				flecha.classList.remove('fa-chevron-up');
				flecha.classList.add('fa-chevron-down');
			}
		}

		document.addEventListener("DOMContentLoaded", function () {

			GetFAQS('ObtenerFAQS')
				.then(faqs => {
					faqs.sort(function (a, b) {
						return a.orden - b.orden;
					});
					var i = 1;
					faqs.forEach(function (faq) {
						if (faq.idEntidad == 0) {
							crearPanel(i, faq.pregunta, faq.respuesta);
                            i++;
						}
					});
				})
				.catch(error => {
					console.error('Error en GetFAQS:', error);
					//alert('Error en GetFAQS: ' + error);
				});
		});
	</script>

	<footer id="footer" class="footer"></footer>
	<script>
				(async () => {
					await renderFooter('footer');
				})()
	</script>

	<script src="./js/jquery.min.js"></script>
	<script src="./js/jquery-migrate-3.0.0.js"></script>
	<script src="./js/jquery-ui.min.js"></script>
	<script src="./js/easing.js"></script>
	<script src="./js/colors.js"></script>
	<script src="./js/popper.min.js"></script>
	<script src="./js/bootstrap-datepicker.js"></script>
	<script src="./js/jquery.nav.js"></script>
	<script src="./js/slicknav.min.js"></script>
	<script src="./js/jquery.scrollUp.min.js"></script>
	<script src="./js/niceselect.js"></script>
	<script src="./js/tilt.jquery.min.js"></script>
	<script src="./js/owl-carousel.js"></script>
	<script src="./js/jquery.counterup.min.js"></script>
	<script src="./js/steller.js"></script>
	<script src="./js/wow.min.js"></script>
	<script src="./js/jquery.magnific-popup.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
	<script src="./js/bootstrap.min.js"></script>
	<script src="./js/main.js"></script>
</body>
</html>
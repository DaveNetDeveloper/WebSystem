<!doctype html>
<html class="no-js" lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content="">
	<meta name="description" content="Home pública">
	<meta name='copyright' content='UOC'>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>Inicio</title>
	<link rel="icon" href="img/favicon.png">
	<link href="https://fonts.googleapis.com/./css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="./css/nice-select.css">
	<link rel="stylesheet" href="./css/font-awesome.min.css">
	<link rel="stylesheet" href="./css/icofont.css">
	<link rel="stylesheet" href="./css/slicknav.min.css">
	<link rel="stylesheet" href="./css/owl-carousel.css">
	<link rel="stylesheet" href="./css/datepicker.css">
	<link rel="stylesheet" href="./css/animate.min.css">
	<link rel="stylesheet" href="./css/magnific-popup.css">

	<link rel="stylesheet" href="./css/normalize.css">
	<link rel="stylesheet" href="./css/style.css">
	<link rel="stylesheet" href="./css/responsive.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

	<!--<script src="./js/libraries/utilities.js"></script>-->
	<script src="./js/services/entidadesController.js"></script>
	<script src="./js/services/FAQSController.js"></script>
	<script src="./js/services/testimoniosController.js"></script>

	<script type="module" src="../Components/modalPanel/modalPanel.js"></script>

	<style>
        body {
            font-family: 'Arial', sans-serif;
        }

        .panel {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            margin-bottom: 10px;
            border-radius: 5px;
            /* overflow: hidden; es clave aquí para que el max-height funcione con el contenido */
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .pregunta {
            padding: 15px;
            cursor: pointer;
            background-color: #3498db;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .respuesta {
            padding: 0 15px; /* Padding vertical inicial de 0 para empezar la transición */
            text-align: left;
            /* CERO VISIBILIDAD INICIAL */
            max-height: 0;
            /* TRANSICIÓN CLAVE */
            /* Anima el max-height y el padding vertical */
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
        }

        /* Estado de la respuesta cuando el panel está activo/abierto */
        .panel.activo .respuesta {
            /* Al abrir, el JS se encarga de establecer dinámicamente el max-height */
            /* max-height: 500px; ya no es necesario aquí */
            /* Devolvemos el padding para que el contenido tenga espacio */
            padding-top: 15px;
            padding-bottom: 15px;
        }

        @media (max-width: 600px) {
            .pregunta {
                font-size: 16px;
            }
        }

        respuesta {
            padding: 0 15px; /* Padding vertical inicial de 0 para empezar la transición */
            text-align: left;
            /* CERO VISIBILIDAD INICIAL */
            max-height: 0;
            /* TRANSICIÓN CLAVE */
            /* Anima el max-height y el padding vertical */
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
        }

        /* Estado de la respuesta cuando el panel está activo/abierto */
        .panel.activo .respuesta {
            /* Al abrir, el JS se encarga de establecer dinámicamente el max-height */
            /* max-height: 500px; ya no es necesario aquí */
            /* Devolvemos el padding para que el contenido tenga espacio */
            padding-top: 15px;
            padding-bottom: 15px;
        }

        @media (max-width: 600px) {
            .pregunta {
                font-size: 16px;
            }
        }

		.flecha {
			font-size: 20px;
		}

		 

        .modal-contenido {
            /* Por defecto */
            opacity: 0;
            transform: scale(0.7);  
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;  
        }

        /* 2. Define el estado final (mostrado) */
        .modal.mostrar .modal-contenido {
            opacity: 1;  
            transform: scale(1);  
        }

	</style>

</head>
<body>

	<div class="preloader">
		<div class="loader">
			<div class="loader-outter"></div>
			<div class="loader-inner"></div>

			<div class="indicator">
				<svg width="16px" height="12px">
					<polyline id="back" points="1 6 4 6 6 11 10 1 12 6 15 6"></polyline>
					<polyline id="front" points="1 6 4 6 6 11 10 1 12 6 15 6"></polyline>
				</svg>
			</div>
		</div>
	</div>
	
	<header class="header">
		<div class="header-inner">
			<div class="container">
				<div class="inner">
					<div class="row">
						<div class="col-lg-3 col-md-3 col-12">
							<div class="logo">
								<a href="home-privada.html"><img src="img/logo.jpg" alt="#"></a>
							</div>
							<div class="mobile-nav"></div>
						</div>
						<div class="col-lg-7 col-md-9 col-12">
							<div class="main-menu">
								<nav class="navigation">
									<ul class="nav menu">
										<li class="active"><a href="home-privada.html">Inicio </a></li>
										<li><a href="explorar.html">Explorar </a></li>
										<li><a href="#">Recompensas </a></li>
										<li><a href="#">Cómo ganar puntos? </a></li>
									</ul>
								</nav>
							</div>
						</div>
						<div class="col-lg-2 col-12">
							<div class="get-quote">
								<a id="infoUsuario" style="background: goldenrod; margin: 15px;" href="#" class="btn">Hola David. Tienes {puntosUsuario} pts.</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	
	<div class="container">
		<div class="row ">
			<div class="col-lg-6  col-12">
				<modal-panel id="modalPanel-InAPp"></modal-panel>
			</div>
		</div>
	</div>

	<script>

		let currentInAppNotification = null;
		let moreInAPps = false;
		let idUsuario = localStorage.getItem('idUsuario');

		document.querySelector('modal-panel') // Escucha el evento emitido por el componente
			.addEventListener('confirm', (e) => {

				//alert(currentInAppNotification.id);
				var result = actualizarNotificacionComoLeida(currentInAppNotification);
				delay(1500);

				const nuevaLista = cargarNotificaciones(idUsuario);
				if (nuevaLista.length > 0) { moreInAPps = true; }

				if (result && moreInAPps) {
					revisarYMostrarNotificaciones(idUsuario);
				}

			});

		document.addEventListener("DOMContentLoaded", async () => {

			localStorage.setItem('idUsuario', String(1));
			await revisarYMostrarNotificaciones(idUsuario);
		});

		async function cargarNotificaciones(idUsuario) {

			const baseUrl = `https://localhost`;
			const controllerName = `InAppNotification`;
			const port = `44311`;
			const apiUrl = `${baseUrl}:${port}/${controllerName}/FiltrarInAppNotifications`;

			const url = `${apiUrl}?filters.IdUsuario=${idUsuario}&filters.Activo=true&orderBy=fechaCreacion&descending=false`;

			const response = await fetch(url, {
				method: "GET",
				//redentials: "include",
				headers: { "Content-Type": "application/json" }
			});

			if (!response.ok) {
				console.error("Error al obtener notificaciones", response.status);
				return [];
			}

			const data = await response.json();
			const lista = data.items;
			return lista;
		}

		function delay(ms) {
			return new Promise(resolve => setTimeout(resolve, ms));
		}

		async function revisarYMostrarNotificaciones(idUsuario) {
			const lista = await cargarNotificaciones(idUsuario);

			if (!lista || lista.length === 0) return;

			if (lista.length > 1) { moreInAPps = true; }

			for (const inApp of lista) {

				currentInAppNotification = inApp;

				await delay(1500);
                await mostrarModal(inApp.titulo, inApp.mensaje);
				return;
			}

			// lista.forEach(inApp => {
			// alert(`Tienes una notificación de tipo '${inApp.tipoEnvioInApp}'`);
			// await mostrarModal(inApp.titulo, inApp.mensaje);
			// });
		}

		async function mostrarModal(titulo, mensaje) {
			const modal = document.getElementById("modalPanel-InAPp");
			modal.setContent(titulo, mensaje, "info");
			modal.mostrar();
		}

		async function actualizarNotificacionComoLeida(notificacion) {
			// Definición de la URL y EndPoint
			const baseUrl = `https://localhost`;
			const controllerName = `InAppNotification`;
			const port = `44311`;
			// Endpoint: [HttpPut("ActualizarInAppNotification")]
			const apiUrl = `${baseUrl}:${port}/${controllerName}/ActualizarInAppNotification`;

			// Prepara el objeto para el cuerpo de la petición
			// Creamos una copia del objeto y configuramos 'activo' a false
			const notificacionActualizada = {
				...notificacion, // Copia todas las propiedades existentes (incluido el 'id')
				activo: false     // Marcamos como inactiva/leída
			};

			try {
				const response = await fetch(apiUrl, {
					method: "PUT", // Usamos el método PUT como indica el controlador
					headers: {
						"Content-Type": "application/json"
					},
					// Enviamos el objeto actualizado como JSON en el cuerpo
					body: JSON.stringify(notificacionActualizada)
				});

				if (!response.ok) {
					console.error(`Error al actualizar notificación ${notificacion.id}:`, response.status, await response.text());
					return false;
				}

				// Si el estado HTTP es 200-299, consideramos que fue exitoso
				console.log(`Notificación ${notificacion.id} actualizada a activo=false.`);
				return true;

			} catch (error) {
				console.error("Error al actualizar la notificación:", error);
				return false;
			}
		}

	</script>

	<section class="newsletter section">
		<div class="container">
			<div class="row ">
				<div class="col-lg-6  col-12">
					<div class="subscribe-text ">
						<h6>Explora tu entorno</h6>
						<p style="color:white" class="">Descubre entidades cercanas.</p>
					</div>
				</div>
				<div class="col-lg-6  col-12">
					<div class="subscribe-form ">
						<div class="newsletter-inner">
							<input id="textEntidad" name="textEntidad" placeholder="Buscar entidad" class="common-input" onfocus="this.placeholder = ''"
								   onblur="this.placeholder = 'Buscar entidad'" type="text">
							<button id="btnBuscarEntidad" class="btn" onclick="redirigir()">BUSCAR</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<script>
		function redirigir() {

			const textEntidadValue = document.getElementById('textEntidad').value;
			if (textEntidadValue.trim() == '') {
				alert('Por favor, ingrese un valor válido para la búsqueda.');
			}
			else {
				window.location.href = `explorar.html?name=${encodeURIComponent(textEntidadValue)}`;
			}
		}
	</script>
	<section class="pricing-table section">
		<div class="container">
			<!-- <div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h2>We Provide You The Best Treatment In Resonable Price</h2>-->
							<!--<img src="img/section-img.png" alt="#">-->
							<!--<p>Lorem ipsum dolor sit amet consectetur adipiscing elit praesent aliquet. pretiumts</p>
					</div>
				</div>
			</div> -->
			<div class="row">
				<div class="col-lg-6 col-md-12 col-12">
					<div class="single-table">
						<div class="table-head">
							<div class="icon">
								<i class="icofont icofont-briefcase"></i>
							</div>
							<h4 class="title">Comercios y locales</h4>
						</div>
						<p>Lorem ipsum dolor sit,cubitur sollicitudin fentum,Nullam interdum enim.</p>
						<div class="table-bottom">
							<a id="buscarComercios" class="btn" href="explorar.html?type=64569dd3-4d65-4eed-9f41-ea87b2270a6c">EXPLORAR COMERCIOS</a>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-md-12 col-12">
					<div class="single-table">
						<div class="table-head">
							<div class="icon">
								<i class="icofont icofont-group"></i>
							</div>
							<h4 class="title">Asociaciones Culturales</h4>
						</div>
						<p>Lorem ipsum dolor sit,cubitur sollicitudin fentum,Nullam interdum enim.</p>
						<div class="table-bottom">
							<a id="buscarAsociaciones" class="btn" href="explorar.html?type=e170a0db-660f-4c34-ae71-3e9b9dbbd92b">EXPLORAR ASOCIACIONES</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<section class="Feautes section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title" style="padding-top: 60px;">
						<h2>Descubre entidades en tu barrio y crea nuevas conexiones</h2>
						<!--<img src="img/section-img.png" alt="#">
						<p>Lorem ipsum dolor sit amet consectetur adipiscing elit praesent aliquet. pretiumts</p>-->
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-4 col-12">
					<div class="single-features">
						<div class="signle-icon">
							<i class="icofont-link"></i>
						</div>
						<h3>Conecta</h3>
						<p>Lorem ipsum sit, consectetur adipiscing elit. Maecenas mi quam vulputate.</p>
					</div>
				</div>
				<div class="col-lg-4 col-12">
					<div class="single-features">
						<div class="signle-icon">
							<i class="icofont-eye-open"></i>
						</div>
						<h3>Reconoce</h3>
						<p>Lorem ipsum sit, consectetur adipiscing elit. Maecenas mi quam vulputate.</p>
					</div>
				</div>
				<div class="col-lg-4 col-12">
					<div class="single-features last">
						<div class="signle-icon">
							<i class="icofont-home"></i>
						</div>
						<h3>Cerca de casa</h3>
						<p>Lorem ipsum sit, consectetur adipiscing elit. Maecenas mi quam vulputate.</p>
					</div>
				</div>
			</div>
		</div>
	</section>
	<div id="fun-facts" class="fun-facts section overlay">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont icofont-home"></i>
						<div class="content">
							<span class="counter">74</span>
							<p>Entidades asociadas</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont icofont-user-alt-3"></i>
						<div class="content">
							<span class="counter">340</span>
							<p>Usuarios activos</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont-heart-alt"></i>
						<div class="content">
							<span class="counter">600</span>
							<p>Conexiones</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<div class="single-fun">
						<i class="icofont icofont-table"></i>
						<div class="content">
							<span class="counter">200</span>
							<p>Actividades</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<section class="why-choose section">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-12">
					<div class="choose-left">
						<h3>¿Cómo encontrar promociones?</h3>
						<p style="color: black;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas pharetra antege vel est lobortis, a commodo magna rhoncus. In quis nisi non emet quam pharetra commodo. </p>
						<p style="color: black;">Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. </p>
						<div class="row">
							<div class="col-lg-12">
								<ul class="list">
									<li><i class="fa fa-caret-right"></i>Maecenas vitae luctus nibh. </li>
									<li><i class="fa fa-caret-right"></i>Duis massa massa.</li>
									<li><i class="fa fa-caret-right"></i>Aliquam feugiat interdum.</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-12">
					<div class="choose-right">
						<div class="video-image">
							<div class="promo-video">
								<div class="waves-block">
									<div class="waves wave-1"></div>
									<div class="waves wave-2"></div>
									<div class="waves wave-3"></div>
								</div>
								</div>
							<a href="https://www.youtube.com/watch?v=vh2wIHwCVUI" class="video video-popup mfp-iframe"><i class="fa fa-play"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
 
	<section class="call-action overlay" data-stellar-background-ratio="0.5">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-12">
					<div class="content">
						<h2 style="margin-bottom:30px">Suscríbete a nuestra newsletter y entérate de noticas, ofertas, promociones y actividades.</h2>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque porttitor dictum turpis nec gravida.</p>
						<div onclick="suscribirme()" id="btnActivarSuscripcion" class="button">
							<a href="#" class="btn">QUIERO SUSCRIBIRME</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<script>
		async function activarSuscripcion(token, email) {

			const baseUrl = `https://localhost`;
			const controllerName = `Usuarios`;
			const port = `44311`;
			const apiUrl = `${baseUrl}:${port}/${controllerName}/ActivacionSuscripcion`;

			// IMPORTANT → parámetros en query string
			const url = `${apiUrl}?token=${encodeURIComponent(token)}&email=${encodeURIComponent(email)}`;

			const response = await fetch(url, {
				method: "PATCH",
				headers: { "Content-Type": "application/json" }
			});

			if (!response.ok) {
				console.error("Error activando suscripción", response.status);
				return false;
			}

			const resultado = await response.json();
			return resultado;
		}

        async function suscribirme() {

            const token = "BA03E160-11C9-4A7D-BF5D-9DF60140F893";
            const email = "dgomezma+admin@gmail.com";

            const ok = await activarSuscripcion(token, email);

			//TODO: Mostrra MODAL-PANEL (Componente)
            if (ok) {
                alert("¡Suscripción activada correctamente!"); 
            } else {
                alert("No se ha podido activar la suscripción.");
            }
		}

	</script>

	<section class="portfolio section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h2>Los mejores servicios y productos están muy cerca de ti.</h2>
						<img src="img/logo.jpg" alt="#" style="margin-top: 20px; margin-bottom: 20px;">
						<p>Encuentra aquello que estabas buscando.</p>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12 col-12">
					<div id="panelImages" class="owl-carousel portfolio-slider">


					</div>
				</div>
			</div>
		</div>
	</section>

	<script>

		const imagenes = [
			'foto1.jpg',
			'foto2.jpg',
			'foto3.jpg',
			'foto4.jpg',
			'foto5.jpg',
			'foto6.jpg',
			'foto7.jpg',
			'foto8.jpg'
		];

		for (const url of imagenes) {

			// Crear elementos HTML con JavaScript
			const singlePfDiv = document.createElement('div');
			singlePfDiv.className = 'single-pf';

			const image = document.createElement('img');
			image.src = 'img/fotos/' + url;
			image.alt = '#';

			const detailsLink = document.createElement('a');
			detailsLink.href = 'portfolio-details.html';
			detailsLink.className = 'btn';
			detailsLink.textContent = 'View Details';

			// Agregar los elementos al contenedor
			singlePfDiv.style.height = "275px";

			singlePfDiv.appendChild(image);
			singlePfDiv.appendChild(detailsLink);

			// Agregar el contenedor al cuerpo del documento
			document.getElementById("panelImages").appendChild(singlePfDiv);
		}

	</script>

	<section class="services section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h2>Cientos de productos y Servicios</h2>
						<img src="img/logo.jpg" alt="#" style="margin-top: 20px; margin-bottom: 20px; width: 100px;">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-book-alt"></i>
						<h4><a href="service-details.html">Descubre</a></h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus dictum eros ut imperdiet. </p>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-location"></i>
						<h4><a href="service-details.html">De proximidad</a></h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus dictum eros ut imperdiet. </p>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-heart-alt"></i>
						<h4><a href="service-details.html">Aprecia tu Barrio</a></h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus dictum eros ut imperdiet. </p>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-groups-alt"></i>
						<h4><a href="service-details.html">Participa</a></h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus dictum eros ut imperdiet. </p>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-screen"></i>
						<h4><a href="service-details.html">Desde tu dispositivo</a></h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus dictum eros ut imperdiet. </p>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 col-12">
					<div class="single-service">
						<i class="icofont-user"></i>
						<h4><a href="service-details.html">Tu Perfil</a></h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus dictum eros ut imperdiet. </p>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section>
		<div>
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h2 style="margin-bottom: 50px">¿Tienes dudas?</h2>
						<div id="FAQS"> </div>
					</div>
				</div>
			</div>
		</div>
	</section>>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
	<script>
		// Variable global para almacenar el índice del panel actualmente abierto (YA NO SE USA)
		// let openPanelIndex = null;

		// Función para generar dinámicamente el código HTML de un panel FAQ (SIN CAMBIOS)
		function crearPanel(id, pregunta, respuesta) {
			const panel = document.createElement('div');
			panel.className = 'panel';
			panel.setAttribute('data-index', id - 1);

			const preguntaDiv = document.createElement('div');
			preguntaDiv.className = 'pregunta';
			// Usamos el icono fa-chevron-down por defecto (cerrado)
			preguntaDiv.innerHTML = `<span>${pregunta}</span><i class="fas fa-chevron-down flecha"></i>`;

			preguntaDiv.addEventListener('click', function () {
				const panelIndex = parseInt(panel.getAttribute('data-index'));
				togglePanel(panelIndex);
			});

			const respuestaDiv = document.createElement('div');
			respuestaDiv.className = 'respuesta';
			respuestaDiv.textContent = respuesta;

			panel.appendChild(preguntaDiv);
			panel.appendChild(respuestaDiv);

			document.getElementById("FAQS").appendChild(panel);
		}

		// Función para cambiar la visibilidad de un panel con animación
		function togglePanel(panelIndex) {
			const panels = document.querySelectorAll('.panel');
			const panel = panels[panelIndex];
			const respuesta = panel.querySelector('.respuesta');
			const flecha = panel.querySelector('.flecha');

			// Solo gestionamos el panel clickeado (permitiendo que otros sigan abiertos)

			const estaActivo = panel.classList.contains('activo');
			panel.classList.toggle('activo');

			let paddingOffsetpx = 15;
			// Controla la animación y el icono del panel clickeado
			if (!estaActivo) {
				// Al abrir
				respuesta.style.maxHeight = respuesta.scrollHeight + paddingOffsetpx * 2 + "px";
				flecha.classList.remove('fa-chevron-down');
				flecha.classList.add('fa-chevron-up');
			} else {
				// Al cerrar
				// Forzar un repaint para que la transición de cierre funcione
				respuesta.style.maxHeight = respuesta.scrollHeight + "px";
				setTimeout(() => {
					respuesta.style.maxHeight = '0';
				}, 10);

				flecha.classList.remove('fa-chevron-up');
				flecha.classList.add('fa-chevron-down');
			}
		}

		// --- Lógica de Carga de FAQS (Sin cambios) ---
		GetFAQS('ObtenerFAQS')
			.then(faqs => {
				faqs.sort(function (a, b) {
					return a.orden - b.orden;
				});
				var i = 1;
				faqs.forEach(function (faq) {
					if (faq.idEntidad == 0) {
						crearPanel(i, faq.pregunta, faq.respuesta);
                    }
					i++;
				});
			})
			.catch(error => {
				console.error('Error en GetFAQS:', error);
				alert('Error en GetFAQS: ' + error);
			});
	</script>

	<footer id="footer" class="footer ">
		<div class="footer-top">
			<div class="container">
				<div class="row">
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer">
							<h2>About Us</h2>
							<p>Lorem ipsum dolor sit am consectetur adipisicing elit do eiusmod tempor incididunt ut labore dolore magna.</p>
							<ul class="social">
								<li><a href="#"><i class="icofont-facebook"></i></a></li>
								<li><a href="#"><i class="icofont-google-plus"></i></a></li>
								<li><a href="#"><i class="icofont-twitter"></i></a></li>
								<li><a href="#"><i class="icofont-vimeo"></i></a></li>
								<li><a href="#"><i class="icofont-pinterest"></i></a></li>
							</ul>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer f-link">
							<h2>Quick Links</h2>
							<div class="row">
								<div class="col-lg-6 col-md-6 col-12">
									<ul>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Home</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>About Us</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Services</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Our Cases</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Other Links</a></li>
									</ul>
								</div>
								<div class="col-lg-6 col-md-6 col-12">
									<ul>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Consuling</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Finance</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Testimonials</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>FAQ</a></li>
										<li><a href="#"><i class="fa fa-caret-right" aria-hidden="true"></i>Contact Us</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer">
							<h2>Open Hours</h2>
							<p>Lorem ipsum dolor sit ame consectetur adipisicing elit do eiusmod tempor incididunt.</p>
							<ul class="time-sidual">
								<li class="day">Monday - Fridayp <span>8.00-20.00</span></li>
								<li class="day">Saturday <span>9.00-18.30</span></li>
								<li class="day">Monday - Thusday <span>9.00-15.00</span></li>
							</ul>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer">
							<h2>Newsletter</h2>
							<p>subscribe to our newsletter to get allour news in your inbox.. Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
							<form action="mail/mail.php" method="get" target="_blank" class="newsletter-inner">
								<input name="email" placeholder="Email Address" class="common-input" onfocus="this.placeholder = ''"
									   onblur="this.placeholder = 'Your email address'" required="" type="email">
								<button class="button"><i class="icofont icofont-paper-plane"></i></button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="copyright">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-12">
						<div class="copyright-content">
							<p>©  Copyright 2025  |  Todos los derechos reservados.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="./js/jquery.min.js"></script>
	<script src="./js/jquery-migrate-3.0.0.js"></script>
	<script src="./js/jquery-ui.min.js"></script>
	<script src="./js/easing.js"></script>
	<script src="./js/colors.js"></script>
	<script src="./js/popper.min.js"></script>
	<script src="./js/bootstrap-datepicker.js"></script>
	<script src="./js/jquery.nav.js"></script>
	<script src="./js/slicknav.min.js"></script>
	<script src="./js/jquery.scrollUp.min.js"></script>
	<script src="./js/niceselect.js"></script>
	<script src="./js/tilt.jquery.min.js"></script>
	<script src="./js/owl-carousel.js"></script>
	<script src="./js/jquery.counterup.min.js"></script>
	<script src="./js/steller.js"></script>
	<script src="./js/wow.min.js"></script>
	<script src="./js/jquery.magnific-popup.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
	<script src="./js/bootstrap.min.js"></script>
	<script src="./js/main.js"></script>
</body>
</html>
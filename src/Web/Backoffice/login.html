<!doctype html>
<html class="no-js" lang="es">
<head>

	<!-- Meta Tags -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content="login">
	<meta name="description" content="Página para iniciar sesión con una cuenta de administrador.">
	<meta name='copyright' content='David Martinez'>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>Login</title>

	<link rel="icon" href="img/favicon.png">

	<script src="../WebPages/js/jquery.min.js"></script>
	<script src="../WebPages/js/jquery-migrate-3.0.0.js"></script>
	<script src="../WebPages/js/jquery-ui.min.js"></script>
	<script src="../WebPages/js/easing.js"></script>
	<script src="../WebPages/js/colors.js"></script>
	<!--<script src="../WebPages/js/popper.min.js"></script>
	<script src="../WebPages/js/bootstrap-datepicker.js"></script>-->
	<script src="../WebPages/js/jquery.nav.js"></script>
	<!--<script src="../WebPages/js/slicknav.min.js"></script>
	<script src="../WebPages/js/jquery.scrollUp.min.js"></script>-->
	<script src="../WebPages/js/niceselect.js"></script>
	<script src="../WebPages/js/tilt.jquery.min.js"></script>
	<!--<script src="../WebPages/js/owl-carousel.js"></script>-->
	<script src="../WebPages/js/jquery.counterup.min.js"></script>
	<script src="../WebPages/js/steller.js"></script>
	<script src="../WebPages/js/wow.min.js"></script>
	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
	<script src="https://maps.google.com/maps/api/js?key=AIzaSyDGqTyqoPIvYxhn_Sa7ZrK5bENUWhpCo0w"></script>
	<script src="../WebPages/js/gmaps.min.js"></script>
	<script src="../WebPages/js/map-active.js"></script>-->
	<!--<script src="../WebPages/js/bootstrap.min.js"></script>-->
	  
</head>
<body>
	<app-login login-type="Admin"></app-login>

	<script type="module" src="../Components/login/login.js"></script>
    <script>

        function getCookie(nombre) {
            const nombreEQ = nombre + "=";
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                let cookie = cookies[i];
                while (cookie.charAt(0) === ' ') {
                    cookie = cookie.substring(1, cookie.length);
                }
                if (cookie.indexOf(nombreEQ) === 0) {
                    return decodeURIComponent(cookie.substring(nombreEQ.length, cookie.length));
                }
            }
            return null;
        }


        document.querySelector('app-login')
            .addEventListener('login-success', (e) => {

                alert("Cokkie: " + getCookie('app-access-token'));
                alert("Cokkie: " + getCookie('app-refresh-token'));
                alert("Cokkie: " + getCookie('app-role'));
                alert("Cokkie: " + getCookie('app-profile'));
                alert("Cokkie: " + getCookie('app-entities'));

                var user_role = getCookie('app-role').toLowerCase(); 
                if (user_role == 'admin') {
                    window.location.href = 'home-admin.html';
                }
                else if (user_role == 'manager') {
                    window.location.href = 'home-manager.html';
                }
            });
    </script>
</body>
</html>

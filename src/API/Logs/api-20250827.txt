2025-08-27T02:25:25.8646189+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T02:25:42.5251729+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T02:25:42.6319990+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T02:25:42.6348801+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T02:25:43.5351023+02:00 8000000f-0000-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T02:25:53.1340491+02:00 8000000f-0000-fe00-b63f-84710c7967bb [WRN] Unable to contact VS to retrieve Browser Link script tag. (a038f0fa)
2025-08-27T02:25:57.6252938+02:00 8000000f-0000-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 14488.5558ms (74253ad3)
2025-08-27T02:26:02.8423035+02:00 8000001b-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T02:26:02.8548484+02:00 8000001b-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 3.6693ms (74253ad3)
2025-08-27T02:26:14.2335886+02:00 80000004-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T02:26:14.3004663+02:00 80000004-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 67.3913ms (74253ad3)
2025-08-27T02:48:06.7702765+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T02:48:07.3806861+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T02:48:07.5368573+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T02:48:08.3402669+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T02:51:14.2626561+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 185910.1174ms (afa2e885)
2025-08-27T02:51:14.3105513+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T02:51:16.7952820+02:00 80000019-0006-fe00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.InvalidOperationException: The entity type 'UsuarioRol' requires a primary key to be defined. If you intended to use a keyless entity type, call 'HasNoKey' in 'OnModelCreating'. For more information on keyless entity types, see https://go.microsoft.com/fwlink/?linkid=2141943.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNonNullPrimaryKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Infrastructure.Internal.NpgsqlModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at Infrastructure.Repositories.AuthRepository.ValidateUser(String u, String p) in C:\Users\David\Desktop\Infrastructure\Repositories\AuthRepository.cs:line 26
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 22
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T02:51:17.1357674+02:00 80000019-0006-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 190393.0661ms (74253ad3)
2025-08-27T02:51:21.0548764+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T02:51:21.0554641+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T02:51:21.0557442+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T02:51:21.0561232+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T02:53:45.8913674+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 144835.0448ms (afa2e885)
2025-08-27T02:53:45.8919420+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T02:53:46.0109599+02:00 80000026-0004-ff00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.InvalidOperationException: The entity type 'UsuarioRol' requires a primary key to be defined. If you intended to use a keyless entity type, call 'HasNoKey' in 'OnModelCreating'. For more information on keyless entity types, see https://go.microsoft.com/fwlink/?linkid=2141943.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNonNullPrimaryKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Infrastructure.Internal.NpgsqlModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at Infrastructure.Repositories.AuthRepository.ValidateUser(String u, String p) in C:\Users\David\Desktop\Infrastructure\Repositories\AuthRepository.cs:line 26
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 22
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T02:53:46.0122129+02:00 80000026-0004-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 144957.4304ms (74253ad3)
2025-08-27T03:39:21.8430058+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T03:39:31.8708120+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T03:39:32.0016030+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T03:39:32.0069951+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T03:39:32.3025325+02:00 8000001e-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T03:39:44.3389299+02:00 8000001e-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 11551.9628ms (74253ad3)
2025-08-27T03:39:45.2157307+02:00 80000008-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T03:39:45.2272065+02:00 80000008-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 7.7807ms (74253ad3)
2025-08-27T03:39:45.7321045+02:00 80000020-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T03:40:02.9117031+02:00 80000020-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 17179.5053ms (74253ad3)
2025-08-27T03:40:05.5738476+02:00 8000000a-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T03:40:05.6347579+02:00 8000000a-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 61.0351ms (74253ad3)
2025-08-27T03:42:30.9730497+02:00 80000026-0005-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T03:42:31.0329835+02:00 80000026-0005-fd00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T03:42:31.2259059+02:00 80000026-0005-fd00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T03:42:31.6744728+02:00 80000026-0005-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T03:46:29.6072442+02:00 80000026-0005-fd00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 237926.8094ms (afa2e885)
2025-08-27T03:46:29.6608588+02:00 80000026-0005-fd00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T03:56:36.5314590+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T03:56:39.0548393+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T03:56:39.0629964+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T03:56:39.0680104+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T03:56:40.4741990+02:00 80000002-0003-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger""" - null null (d509f86a)
2025-08-27T03:56:43.7450050+02:00 80000097-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T03:56:44.2410905+02:00 80000002-0003-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger""" - 301 null null 3870.7205ms (74253ad3)
2025-08-27T03:56:44.2830909+02:00 80000097-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 538.5803ms (74253ad3)
2025-08-27T03:56:44.3384268+02:00 80000014-0000-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-08-27T03:56:44.3384187+02:00 8000001f-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/swagger-ui-bundle.js""" - null null (d509f86a)
2025-08-27T03:56:44.3470752+02:00 8000001a-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/swagger-ui-standalone-preset.js""" - null null (d509f86a)
2025-08-27T03:56:44.6221055+02:00 8000001a-0002-ff00-b63f-84710c7967bb [INF] Sending file. Request path: '"/swagger-ui-standalone-preset.js"'. Physical path: '"N/A"' (27b0a520)
2025-08-27T03:56:44.6221097+02:00 80000014-0000-ff00-b63f-84710c7967bb [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-08-27T03:56:44.6320364+02:00 80000014-0000-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/swagger-ui.css""" - 200 144929 "text/css" 289.085ms (74253ad3)
2025-08-27T03:56:44.6327957+02:00 80000099-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T03:56:44.6359085+02:00 8000001a-0002-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/swagger-ui-standalone-preset.js""" - 200 312163 "text/javascript" 288.9931ms (74253ad3)
2025-08-27T03:56:44.6379521+02:00 8000001f-0002-fc00-b63f-84710c7967bb [INF] Sending file. Request path: '"/swagger-ui-bundle.js"'. Physical path: '"N/A"' (27b0a520)
2025-08-27T03:56:44.6384317+02:00 80000099-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.9019ms (74253ad3)
2025-08-27T03:56:44.6527014+02:00 8000000b-0001-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T03:56:44.6938112+02:00 8000001f-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/swagger-ui-bundle.js""" - 200 1061536 "text/javascript" 355.787ms (74253ad3)
2025-08-27T03:56:45.1799510+02:00 8000000b-0001-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 527.3084ms (74253ad3)
2025-08-27T03:56:45.9960794+02:00 80000016-0000-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T03:56:46.0566356+02:00 80000016-0000-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 60.5341ms (74253ad3)
2025-08-27T03:56:47.1058536+02:00 80000021-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/favicon-32x32.png""" - null null (d509f86a)
2025-08-27T03:56:47.1073446+02:00 80000021-0002-fc00-b63f-84710c7967bb [INF] Sending file. Request path: '"/favicon-32x32.png"'. Physical path: '"N/A"' (27b0a520)
2025-08-27T03:56:47.1075696+02:00 80000021-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/favicon-32x32.png""" - 200 628 "image/png" 1.8169ms (74253ad3)
2025-08-27T03:58:06.4809997+02:00 80000018-0000-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T03:58:06.5202026+02:00 80000018-0000-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T03:58:06.5654765+02:00 80000018-0000-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T03:58:06.9954318+02:00 80000018-0000-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T03:58:30.1751697+02:00 80000018-0000-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("252"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T03:58:54.8836260+02:00 80000018-0000-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("6,994"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T03:58:57.1154924+02:00 80000018-0000-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T04:21:17.0970242+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T04:21:27.0357470+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T04:21:27.2323581+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T04:21:27.2947760+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T04:21:28.0570464+02:00 80000002-0000-fa00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T04:21:33.9819232+02:00 8000000d-0001-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T04:21:33.9819232+02:00 8000001f-0006-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T04:21:34.1130265+02:00 80000002-0000-fa00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 6284.995ms (74253ad3)
2025-08-27T04:21:34.1487225+02:00 8000000d-0001-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 8.7486ms (74253ad3)
2025-08-27T04:21:34.7290435+02:00 8000001f-0006-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 747.496ms (74253ad3)
2025-08-27T04:21:34.8402263+02:00 80000013-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T04:21:34.8764554+02:00 80000013-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 36.3979ms (74253ad3)
2025-08-27T04:21:58.6328008+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T04:21:58.6558637+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T04:21:58.7709885+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T04:21:59.4939488+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T04:22:57.5445768+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("212"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T04:29:15.0715360+02:00 80000015-0004-fc00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("12,041"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T04:29:15.4345103+02:00 80000015-0004-fc00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T04:36:34.5627181+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 875056.5224ms (afa2e885)
2025-08-27T04:36:34.6262606+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T04:36:36.7505038+02:00 80000015-0004-fc00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.AggregateException: One or more errors occurred. (42P01: no existe la relación «UsuarioRoles»

POSITION: 48)
 ---> Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
   at Application.Services.AuthService.GetRolesByUSer(Int32 idUSer) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 36
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 24
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T04:36:36.7991014+02:00 80000015-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 878166.4717ms (74253ad3)
2025-08-27T04:36:43.2429893+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T04:36:43.2435743+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T04:36:43.2438106+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T04:36:43.2441400+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T04:36:47.2650151+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("2"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T04:36:51.3316457+02:00 80000018-0003-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("38"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T04:36:51.3497644+02:00 80000018-0003-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T04:37:22.7126118+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 39468.2227ms (afa2e885)
2025-08-27T04:37:22.7132713+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T04:37:22.7580281+02:00 80000018-0003-ff00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.AggregateException: One or more errors occurred. (42P01: no existe la relación «UsuarioRoles»

POSITION: 48)
 ---> Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
   at Application.Services.AuthService.GetRolesByUSer(Int32 idUSer) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 36
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 24
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T04:37:22.7671480+02:00 80000018-0003-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 39524.2322ms (74253ad3)
2025-08-27T04:37:24.6440444+02:00 80000012-0007-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T04:37:24.6443516+02:00 80000012-0007-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T04:37:24.6444704+02:00 80000012-0007-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T04:37:24.6445902+02:00 80000012-0007-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T04:37:28.0464614+02:00 80000012-0007-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T04:40:12.7767857+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T04:40:14.0299754+02:00 80000017-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T04:40:14.1139612+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T04:40:14.1193386+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T04:40:14.1222777+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T04:40:15.5716608+02:00 80000017-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 1567.6427ms (74253ad3)
2025-08-27T04:40:15.7366483+02:00 80000019-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T04:40:15.7366483+02:00 8000009f-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T04:40:15.7464718+02:00 80000019-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.4688ms (74253ad3)
2025-08-27T04:40:15.7935179+02:00 8000009f-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 56.8441ms (74253ad3)
2025-08-27T04:40:16.0895916+02:00 80000005-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T04:40:16.1303451+02:00 80000005-0000-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 40.8009ms (74253ad3)
2025-08-27T04:45:18.4620890+02:00 80000014-0007-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T04:45:18.4706138+02:00 80000014-0007-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T04:45:18.4764347+02:00 80000014-0007-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T04:45:18.5042435+02:00 80000014-0007-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T04:45:44.5665459+02:00 80000014-0007-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("129"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T04:46:07.2159876+02:00 80000014-0007-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("168"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u" (627a98df)
2025-08-27T04:46:07.3498628+02:00 80000014-0007-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T04:46:23.2651513+02:00 80000014-0007-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("8"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T04:46:23.3112290+02:00 80000014-0007-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:00:07.5447129+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T05:00:13.7566318+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T05:00:13.8751120+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T05:00:13.8803790+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T05:00:14.6648438+02:00 8000001d-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T05:00:20.1696435+02:00 8000001d-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 5664.5274ms (74253ad3)
2025-08-27T05:00:20.3472906+02:00 8000002e-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T05:00:20.3776837+02:00 8000002e-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 3.7103ms (74253ad3)
2025-08-27T05:00:20.3777885+02:00 80000030-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T05:00:20.5681534+02:00 80000030-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 190.3295ms (74253ad3)
2025-08-27T05:00:21.8241881+02:00 80000032-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T05:00:21.8780891+02:00 80000032-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 53.9484ms (74253ad3)
2025-08-27T05:00:44.0616728+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:00:44.7880130+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:00:45.2856494+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:00:45.5348364+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:00:57.2321171+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("146"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:01:34.2072248+02:00 8000002d-0004-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("225"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u" (627a98df)
2025-08-27T05:01:34.4152999+02:00 8000002d-0004-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:01:38.1506825+02:00 8000002d-0004-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("7"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T05:01:38.2458484+02:00 8000002d-0004-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:04:46.5932783+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 240910.3954ms (afa2e885)
2025-08-27T05:04:46.6109471+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T05:04:47.5056317+02:00 8000002d-0004-ff00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.AggregateException: One or more errors occurred. (42P01: no existe la relación «UsuarioRoles»

POSITION: 48)
 ---> Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
   at Application.Services.AuthService.GetRolesByUSer(Int32 idUSer) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 36
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 24
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T05:04:47.5814946+02:00 8000002d-0004-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 243519.9353ms (74253ad3)
2025-08-27T05:04:50.9475671+02:00 8000001a-0007-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:04:50.9483263+02:00 8000001a-0007-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:04:50.9485742+02:00 8000001a-0007-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:04:50.9489620+02:00 8000001a-0007-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:04:51.0099963+02:00 8000001a-0007-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:04:54.6916167+02:00 8000001a-0007-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("12"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T05:04:55.8491570+02:00 8000001a-0007-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:05:37.5593737+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T05:05:38.7941184+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T05:05:38.7971374+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T05:05:38.7993931+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T05:05:38.8014445+02:00 80000004-0003-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T05:05:39.6575592+02:00 80000004-0003-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 872.6304ms (74253ad3)
2025-08-27T05:05:39.7101857+02:00 80000021-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T05:05:39.7197045+02:00 80000021-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.2656ms (74253ad3)
2025-08-27T05:05:39.7245770+02:00 80000020-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T05:05:39.8372400+02:00 80000020-0002-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 112.6881ms (74253ad3)
2025-08-27T05:05:40.1113741+02:00 8000000a-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T05:05:40.1483738+02:00 8000000a-0000-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 37.0355ms (74253ad3)
2025-08-27T05:06:19.2533818+02:00 80000023-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:06:19.2614485+02:00 80000023-0004-fc00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:06:19.2682209+02:00 80000023-0004-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:06:19.2931769+02:00 80000023-0004-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:06:21.5500270+02:00 80000023-0004-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("81"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:06:31.5970414+02:00 80000023-0004-fc00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("26"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T05:06:31.6529490+02:00 80000023-0004-fc00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:08:27.7635527+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T05:08:28.0788403+02:00 80000010-0001-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T05:08:28.1393658+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T05:08:28.1431644+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T05:08:28.1458506+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T05:08:28.5870748+02:00 80000010-0001-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 517.0361ms (74253ad3)
2025-08-27T05:08:28.7587199+02:00 80000020-0007-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T05:08:28.7587561+02:00 8000001c-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T05:08:28.7661929+02:00 8000001c-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 6.8554ms (74253ad3)
2025-08-27T05:08:28.8331636+02:00 80000020-0007-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 80.6399ms (74253ad3)
2025-08-27T05:08:28.9059564+02:00 80000007-0000-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T05:08:28.9630703+02:00 80000007-0000-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 57.2985ms (74253ad3)
2025-08-27T05:08:41.9030334+02:00 8000002f-0004-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:08:41.9117809+02:00 8000002f-0004-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:08:41.9373452+02:00 8000002f-0004-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:08:41.9630693+02:00 8000002f-0004-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:08:43.9661208+02:00 8000002f-0004-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("113"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:08:52.9331935+02:00 8000002f-0004-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("22"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad, u.\"Entidadid\", u.\"Rolid\", u.\"Usuarioid\"
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T05:08:52.9962838+02:00 8000002f-0004-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 89
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 89
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 89
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 89
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:10:29.9015917+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T05:10:30.1725061+02:00 80000031-0004-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T05:10:30.2785468+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T05:10:30.2817866+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T05:10:30.3063031+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T05:10:30.6129494+02:00 80000031-0004-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 450.6653ms (74253ad3)
2025-08-27T05:10:30.6152272+02:00 80000006-0006-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T05:10:30.6267246+02:00 80000006-0006-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.9135ms (74253ad3)
2025-08-27T05:10:30.6387776+02:00 80000012-0001-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T05:10:30.6960007+02:00 80000012-0001-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 57.3104ms (74253ad3)
2025-08-27T05:10:30.7702500+02:00 80000014-0001-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T05:10:30.8192863+02:00 80000014-0001-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 49.0545ms (74253ad3)
2025-08-27T05:11:21.2842910+02:00 8000003a-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:11:21.2918677+02:00 8000003a-0002-fc00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:11:21.2981095+02:00 8000003a-0002-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:11:21.3305082+02:00 8000003a-0002-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:13:30.7313785+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T05:13:30.9972616+02:00 80000009-0000-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T05:13:31.0805059+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T05:13:31.0834901+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T05:13:31.0855648+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T05:13:31.3566736+02:00 80000009-0000-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 367.0608ms (74253ad3)
2025-08-27T05:13:31.3675949+02:00 8000000a-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T05:13:31.3781670+02:00 80000023-0003-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T05:13:31.3781735+02:00 8000000a-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.9438ms (74253ad3)
2025-08-27T05:13:31.4422962+02:00 80000023-0003-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 64.2601ms (74253ad3)
2025-08-27T05:13:31.4992639+02:00 8000000b-0000-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T05:13:31.5452096+02:00 8000000b-0000-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 45.9672ms (74253ad3)
2025-08-27T05:14:16.0057490+02:00 8000003c-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:14:16.0141643+02:00 8000003c-0002-fc00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:14:16.0203181+02:00 8000003c-0002-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:14:16.0474156+02:00 8000003c-0002-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:14:23.4427704+02:00 8000003c-0002-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("153"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:14:42.7168981+02:00 8000003c-0002-fc00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("261"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad, u.\"Entidadid\", u.\"Rolid\", u.\"Usuarioid\"
FROM \"UsuarioRoles\" AS u" (627a98df)
2025-08-27T05:14:42.9675550+02:00 8000003c-0002-fc00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 89
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 89
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 89
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 89
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:14:46.6658209+02:00 8000003c-0002-fc00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("15"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad, u.\"Entidadid\", u.\"Rolid\", u.\"Usuarioid\"
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T05:14:48.4252472+02:00 8000003c-0002-fc00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 89
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 89
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 89
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 89
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:16:09.2470825+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T05:16:09.5504130+02:00 8000000c-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T05:16:09.6337838+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T05:16:09.6445113+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T05:16:09.6466115+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T05:16:09.9530162+02:00 80000029-0004-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T05:16:09.9530162+02:00 80000036-0004-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T05:16:09.9540067+02:00 8000000c-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 408.3526ms (74253ad3)
2025-08-27T05:16:09.9596194+02:00 80000029-0004-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 6.2617ms (74253ad3)
2025-08-27T05:16:10.0173283+02:00 80000036-0004-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 64.5884ms (74253ad3)
2025-08-27T05:16:10.0632016+02:00 80000029-0006-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T05:16:10.1041553+02:00 80000029-0006-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 40.9566ms (74253ad3)
2025-08-27T05:16:21.4794131+02:00 80000010-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T05:16:21.4871536+02:00 80000010-0000-fd00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T05:16:21.4936241+02:00 80000010-0000-fd00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T05:16:21.5206348+02:00 80000010-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T05:16:26.2777536+02:00 80000010-0000-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("79"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:17:17.4285708+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("21"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad, u.\"Entidadid\"
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T05:17:31.0555802+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()" (f5c7ac34)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
2025-08-27T05:17:44.8236999+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()" (f5c7ac34)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
2025-08-27T05:17:51.9690750+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()" (f5c7ac34)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
2025-08-27T05:17:56.6675357+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()" (f5c7ac34)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items()
2025-08-27T05:18:00.5930843+02:00 80000010-0000-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T05:19:43.1876186+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 63
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 63
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 63
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 63
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T05:19:43.4031293+02:00 80000010-0000-fd00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("3"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad, u.\"Entidadid\"
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T13:04:00.1304960+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T13:04:12.3610529+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T13:04:12.4487606+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T13:04:12.4532863+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T13:04:13.4824717+02:00 800000a2-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T13:04:21.9819331+02:00 800000a2-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 8633.4323ms (74253ad3)
2025-08-27T13:04:26.0048048+02:00 80000018-0001-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T13:04:26.1461925+02:00 80000018-0001-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 8.7766ms (74253ad3)
2025-08-27T13:04:26.3848933+02:00 800000a4-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T13:04:27.0706533+02:00 800000a4-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 685.9528ms (74253ad3)
2025-08-27T13:04:27.2992147+02:00 800000a6-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T13:04:27.3468202+02:00 800000a6-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 47.6011ms (74253ad3)
2025-08-27T13:05:16.8126272+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T13:05:16.8345328+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T13:05:16.9007398+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T13:05:17.2082775+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T13:05:42.8040613+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("118"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T13:06:31.4565830+02:00 80000003-0004-fd00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("573"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T13:06:31.9032974+02:00 80000003-0004-fd00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
2025-08-27T13:09:14.8017317+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 237580.2982ms (afa2e885)
2025-08-27T13:09:14.8264765+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T13:09:15.7249129+02:00 80000003-0004-fd00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.AggregateException: One or more errors occurred. (42P01: no existe la relación «UsuarioRoles»

POSITION: 48)
 ---> Npgsql.PostgresException (0x80004005): 42P01: no existe la relación «UsuarioRoles»

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
   at Application.Services.AuthService.GetRolesByUSer(Int32 idUSer) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 36
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: no existe la relación «UsuarioRoles»
    Position: 48
    File: parse_relation.c
    Line: 1452
    Routine: parserOpenTable
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 24
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T13:09:15.7958458+02:00 80000003-0004-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 238983.3099ms (74253ad3)
2025-08-27T13:09:19.7685396+02:00 80000028-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T13:09:19.7692681+02:00 80000028-0002-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T13:09:19.7694775+02:00 80000028-0002-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T13:09:19.7885489+02:00 80000028-0002-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T13:09:23.8662598+02:00 80000028-0002-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T13:09:28.5897563+02:00 80000028-0002-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("36"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (0723d8ff)
2025-08-27T13:14:53.0093831+02:00 80000028-0002-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("89"ms) [Parameters=["@__get_Item_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.descripcion, r.nombre
FROM \"Roles\" AS r
WHERE r.id = @__get_Item_0
LIMIT 1" (627a98df)
2025-08-27T13:14:53.0324083+02:00 80000028-0002-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42703: no existe la columna r.descripcion

POSITION: 14
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: no existe la columna r.descripcion
    Hint: Probablemente quiera hacer referencia a la columna «r.descripción».
    Position: 14
    File: parse_relation.c
    Line: 3732
    Routine: errorMissingColumn" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42703: no existe la columna r.descripcion

POSITION: 14
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: no existe la columna r.descripcion
    Hint: Probablemente quiera hacer referencia a la columna «r.descripción».
    Position: 14
    File: parse_relation.c
    Line: 3732
    Routine: errorMissingColumn
2025-08-27T13:30:26.1125095+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T13:30:30.4584442+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T13:30:30.6351532+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T13:30:30.6391506+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T13:30:31.0696292+02:00 80000005-0007-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T13:30:34.5156130+02:00 80000005-0007-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 3632.0718ms (74253ad3)
2025-08-27T13:30:37.0430756+02:00 8000000a-0006-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T13:30:37.8476943+02:00 8000000a-0006-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 9.7379ms (74253ad3)
2025-08-27T13:30:38.5231623+02:00 80000012-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T13:30:39.0126325+02:00 80000012-0000-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 489.331ms (74253ad3)
2025-08-27T13:30:39.2541041+02:00 80000004-0004-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T13:30:39.3228575+02:00 80000004-0004-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 68.8869ms (74253ad3)
2025-08-27T13:33:43.8447807+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T13:33:43.8870848+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T13:33:43.9640818+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T13:33:44.2461917+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T13:34:49.7745408+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Executed DbCommand ("139"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T13:35:04.7609824+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Executed DbCommand ("14,603"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (0723d8ff)
2025-08-27T13:35:44.1738673+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 119920.1232ms (afa2e885)
2025-08-27T13:35:44.2227249+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T13:35:50.6714264+02:00 8000000b-0000-f900-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
   at System.Collections.Generic.List`1.get_Item(Int32 index)
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 24
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T13:35:50.7752250+02:00 8000000b-0000-f900-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 126931.0851ms (74253ad3)
2025-08-27T13:35:59.4858084+02:00 8000002d-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T13:35:59.4866508+02:00 8000002d-0002-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T13:35:59.4871782+02:00 8000002d-0002-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T13:35:59.4879425+02:00 8000002d-0002-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T13:36:02.4871474+02:00 8000002d-0002-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T13:36:15.6383943+02:00 8000002d-0002-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("3"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (0723d8ff)
2025-08-27T13:40:06.1531333+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T13:40:07.5865517+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T13:40:07.5944063+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T13:40:07.5991911+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T13:40:07.9469549+02:00 8000002a-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T13:40:09.9047721+02:00 8000002a-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 1963.3012ms (74253ad3)
2025-08-27T13:40:10.0601042+02:00 8000002c-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T13:40:10.0912408+02:00 8000002c-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 9.16ms (74253ad3)
2025-08-27T13:40:10.0919368+02:00 80000041-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T13:40:13.2900553+02:00 80000041-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 3198.2509ms (74253ad3)
2025-08-27T13:40:14.3783746+02:00 8000001a-0001-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T13:40:14.4446788+02:00 8000001a-0001-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 66.6344ms (74253ad3)
2025-08-27T13:40:49.3682601+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T13:40:49.3796469+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T13:40:49.3893214+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T13:40:49.4162254+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T13:40:56.5998817+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("114"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T13:50:53.8667059+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("20"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (0723d8ff)
2025-08-27T13:52:45.7644704+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("61"ms) [Parameters=["@__get_Item_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.descripcion, r.nombre
FROM \"Roles\" AS r
WHERE r.id = @__get_Item_0
LIMIT 1" (0723d8ff)
2025-08-27T13:53:30.2276947+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T13:53:30.3085374+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 760887.1271ms (afa2e885)
2025-08-27T13:53:30.3087041+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T13:53:30.3186070+02:00 80000026-0007-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 200 null "application/json; charset=utf-8" 760950.4851ms (74253ad3)
2025-08-27T13:54:13.8060832+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Roles/ObtenerRoles""" - null null (d509f86a)
2025-08-27T13:54:14.0511731+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.RolesController.ObtenerRoles (API)"' (500cc934)
2025-08-27T13:54:14.0697948+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerRoles\", controller = \"Roles\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerRoles()" on controller "API.Controllers.RolesController" ("API"). (122b2fdf)
2025-08-27T13:54:18.6280417+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.descripcion, r.nombre
FROM \"Roles\" AS r" (0723d8ff)
2025-08-27T13:54:18.6296920+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Rol, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T13:54:18.7069603+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Executed action "API.Controllers.RolesController.ObtenerRoles (API)" in 4636.9117ms (afa2e885)
2025-08-27T13:54:18.7070831+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.RolesController.ObtenerRoles (API)"' (99874f2b)
2025-08-27T13:54:18.7075874+02:00 80000045-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Roles/ObtenerRoles""" - 200 null "application/json; charset=utf-8" 4901.7705ms (74253ad3)
2025-08-27T13:59:50.3276658+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T13:59:50.7485083+02:00 80000030-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T13:59:50.8627678+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T13:59:50.8667654+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T13:59:50.8696318+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T13:59:51.3026019+02:00 80000030-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 568.5499ms (74253ad3)
2025-08-27T13:59:51.3222173+02:00 8000000d-0000-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T13:59:51.3248284+02:00 80000024-0004-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T13:59:51.3337921+02:00 8000000d-0000-f900-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.8977ms (74253ad3)
2025-08-27T13:59:51.3898485+02:00 80000024-0004-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 65.0673ms (74253ad3)
2025-08-27T13:59:51.4863196+02:00 80000026-0004-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T13:59:51.5301800+02:00 80000026-0004-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 44.0626ms (74253ad3)
2025-08-27T14:01:39.4322926+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T14:01:39.4434045+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T14:01:39.4497964+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T14:01:39.4798559+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T14:01:42.2940922+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("93"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T14:02:07.9498112+02:00 800000aa-0006-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("15,697"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad, u.\"Entidadid\", u.\"Rolid\", u.\"Usuarioid\"
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (627a98df)
2025-08-27T14:02:08.2739225+02:00 800000aa-0006-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Infrastructure.Persistence.ApplicationDbContext"'."
""Npgsql.PostgresException (0x80004005): 42703: no existe la columna u.Entidadid

POSITION: 43
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: no existe la columna u.Entidadid
    Position: 43
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn" (f5c7ac34)
Npgsql.PostgresException (0x80004005): 42703: no existe la columna u.Entidadid

POSITION: 43
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: no existe la columna u.Entidadid
    Position: 43
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-08-27T14:03:12.2321146+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 92747.3241ms (afa2e885)
2025-08-27T14:03:12.2363837+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T14:03:31.4547423+02:00 800000aa-0006-ff00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/auth/login" (564da9e9)
System.AggregateException: One or more errors occurred. (42703: no existe la columna u.Entidadid

POSITION: 43)
 ---> Npgsql.PostgresException (0x80004005): 42703: no existe la columna u.Entidadid

POSITION: 43
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.UsuarioRepository.GetRolesByUsuarioId(Int32 id) in C:\Users\David\Desktop\Infrastructure\Repositories\UsuarioRepository.cs:line 124
   at Application.Services.AuthService.GetRolesByUSer(Int32 idUSer) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 36
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: no existe la columna u.Entidadid
    Position: 43
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Application.Services.AuthService.ValidateUser(String userName, String password) in C:\Users\David\Desktop\Application\Services\AuthService.cs:line 24
   at API.Controllers.AuthController.Login(LoginDto dto) in C:\Users\David\Desktop\API\Controllers\AuthController.cs:line 31
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T14:03:31.4676041+02:00 800000aa-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 500 null "application/json" 112035.6462ms (74253ad3)
2025-08-27T14:04:49.5136182+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T14:04:50.1603078+02:00 8000000b-0007-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T14:04:50.3709234+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T14:04:50.3778312+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T14:04:50.3838438+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T14:04:51.1698052+02:00 8000000e-0004-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T14:04:51.1698050+02:00 80000002-0006-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T14:04:51.1715354+02:00 8000000b-0007-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 1032.6875ms (74253ad3)
2025-08-27T14:04:51.1838363+02:00 8000000e-0004-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 13.8528ms (74253ad3)
2025-08-27T14:04:51.3352552+02:00 80000002-0006-f900-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 165.8039ms (74253ad3)
2025-08-27T14:04:51.5030126+02:00 8000000f-0000-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T14:04:51.6450426+02:00 8000000f-0000-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 142.0331ms (74253ad3)
2025-08-27T14:05:53.3917705+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T14:05:53.4003938+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T14:05:53.4178816+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T14:05:53.4483094+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T14:05:55.7795080+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("83"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T14:06:18.1094521+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u" (0723d8ff)
2025-08-27T14:06:39.6892681+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("15"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.idrol, u.idusuario, u.identidad
FROM \"UsuarioRoles\" AS u
WHERE u.idusuario = @__id_0" (0723d8ff)
2025-08-27T14:06:55.6861575+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.descripcion, r.nombre
FROM \"Roles\" AS r
WHERE r.id = @__get_Item_0
LIMIT 1" (0723d8ff)
2025-08-27T14:07:11.5687230+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T14:07:11.5845976+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 78129.7344ms (afa2e885)
2025-08-27T14:07:11.5848528+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T14:07:11.5962245+02:00 80000010-0004-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 200 null "application/json; charset=utf-8" 78204.7496ms (74253ad3)
2025-08-27T14:23:29.9148243+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T14:23:30.5051560+02:00 8000002f-0003-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T14:23:30.6050450+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T14:23:30.6088064+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T14:23:30.6110850+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T14:23:31.5740427+02:00 800000ad-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T14:23:31.5764899+02:00 8000002f-0003-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 1080.9009ms (74253ad3)
2025-08-27T14:23:31.7777516+02:00 80000047-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T14:23:31.7810739+02:00 800000ad-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 207.0392ms (74253ad3)
2025-08-27T14:23:31.7894248+02:00 80000047-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.9005ms (74253ad3)
2025-08-27T14:23:32.7073519+02:00 800000af-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T14:23:32.7499746+02:00 800000af-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 42.8574ms (74253ad3)
2025-08-27T14:23:46.9139258+02:00 80000002-0004-fa00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 106 (d509f86a)
2025-08-27T14:23:46.9216787+02:00 80000002-0004-fa00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T14:23:46.9285459+02:00 80000002-0004-fa00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T14:23:46.9649113+02:00 80000002-0004-fa00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T14:23:52.8002145+02:00 80000002-0004-fa00-b63f-84710c7967bb [INF] Executed DbCommand ("134"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T14:24:21.5488590+02:00 80000002-0004-fa00-b63f-84710c7967bb [INF] Executed DbCommand ("3,990"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T14:27:22.0629147+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T14:27:22.3312706+02:00 80000005-0006-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T14:27:22.4238741+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T14:27:22.4302163+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T14:27:22.4377195+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T14:27:22.8152552+02:00 80000012-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T14:27:22.8160529+02:00 80000013-0004-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T14:27:22.8161464+02:00 80000005-0006-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 488.8456ms (74253ad3)
2025-08-27T14:27:22.8339622+02:00 80000013-0004-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 14.3852ms (74253ad3)
2025-08-27T14:27:22.8775319+02:00 80000012-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 62.308ms (74253ad3)
2025-08-27T14:27:22.9425277+02:00 8000002f-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T14:27:23.0203112+02:00 8000002f-0002-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 77.8394ms (74253ad3)
2025-08-27T14:28:16.1008625+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T14:28:16.1086179+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T14:28:16.1149282+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T14:28:16.1737252+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T14:28:18.6405513+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Executed DbCommand ("92"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T14:28:29.9458860+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Executed DbCommand ("87"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T14:29:50.8916084+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T14:29:50.9064089+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 94727.9624ms (afa2e885)
2025-08-27T14:29:50.9065860+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T14:29:50.9168397+02:00 80000007-0006-f900-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 200 null "application/json; charset=utf-8" 94816.2109ms (74253ad3)
2025-08-27T14:40:42.6334882+02:00 8000000b-0002-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Usuarios/ObtenerUsuarios""" - null null (d509f86a)
2025-08-27T14:40:42.9138397+02:00 8000000b-0002-fb00-b63f-84710c7967bb [INF] Authorization failed. "These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)" (92d7f7d3)
2025-08-27T14:40:42.9360435+02:00 8000000b-0002-fb00-b63f-84710c7967bb [INF] AuthenticationScheme: "Bearer" was forbidden. (212684b8)
2025-08-27T14:40:42.9518408+02:00 8000000b-0002-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Usuarios/ObtenerUsuarios""" - 403 null null 318.7709ms (74253ad3)
2025-08-27T14:42:49.1889169+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T14:42:50.0944001+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T14:42:50.0973337+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T14:42:50.0994936+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T14:42:50.5715568+02:00 8000000d-0004-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T14:42:51.1839346+02:00 8000000d-0004-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 628.6867ms (74253ad3)
2025-08-27T14:42:51.1989590+02:00 80000028-0007-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T14:42:51.1989590+02:00 80000032-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T14:42:51.2034173+02:00 80000032-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.0301ms (74253ad3)
2025-08-27T14:42:51.2510187+02:00 80000028-0007-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 52.1999ms (74253ad3)
2025-08-27T14:42:51.6980689+02:00 800000b1-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T14:42:51.7471009+02:00 800000b1-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 49.2734ms (74253ad3)
2025-08-27T14:43:04.0430102+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T14:43:04.0516902+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T14:43:04.0774429+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T14:43:04.2420965+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T14:43:10.2925026+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("140"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T14:43:10.8309076+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Executed DbCommand ("42"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T14:44:12.8822273+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T14:44:12.8950858+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 68648.4303ms (afa2e885)
2025-08-27T14:44:12.8952502+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T14:44:12.9035946+02:00 800000b3-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 200 null "application/json; charset=utf-8" 68860.8017ms (74253ad3)
2025-08-27T14:44:41.5881701+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Usuarios/ObtenerUsuarios""" - null null (d509f86a)
2025-08-27T14:44:41.7744935+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.UsuariosController.ObtenerUsuarios (API)"' (500cc934)
2025-08-27T14:44:41.8280442+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerUsuarios\", controller = \"Usuarios\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerUsuarios()" on controller "API.Controllers.UsuariosController" ("API"). (122b2fdf)
2025-08-27T14:45:53.2198952+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Obteniendo usuarios. (16fb1155)
2025-08-27T14:45:54.0879729+02:00 80000008-0004-fa00-b63f-84710c7967bb [ERR] Error obteniendo usuarios. (aa204f75)
System.Exception: Error de prueba.
   at API.Controllers.UsuariosController.ObtenerUsuarios() in C:\Users\David\Desktop\API\Controllers\UsuariosController.cs:line 37
2025-08-27T14:46:06.6132343+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u" (0723d8ff)
2025-08-27T14:46:23.4398655+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u" (0723d8ff)
2025-08-27T14:46:23.4437203+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Usuario, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T14:46:23.5427789+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Executed action "API.Controllers.UsuariosController.ObtenerUsuarios (API)" in 101714.5134ms (afa2e885)
2025-08-27T14:46:23.5428827+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.UsuariosController.ObtenerUsuarios (API)"' (99874f2b)
2025-08-27T14:46:23.5433794+02:00 80000008-0004-fa00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Usuarios/ObtenerUsuarios""" - 200 null "application/json; charset=utf-8" 101955.5453ms (74253ad3)
2025-08-27T15:12:06.3241485+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T15:12:14.5335815+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T15:12:14.6844820+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T15:12:14.6876198+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T15:12:15.1266570+02:00 80000037-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T15:12:19.5247791+02:00 80000037-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 4611.8311ms (74253ad3)
2025-08-27T15:12:24.1248568+02:00 80000039-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T15:12:24.3014074+02:00 80000016-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T15:12:24.3066805+02:00 80000039-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 10.6317ms (74253ad3)
2025-08-27T15:12:25.3674555+02:00 80000016-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 1066.068ms (74253ad3)
2025-08-27T15:12:25.9984986+02:00 80000018-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T15:12:26.1527311+02:00 80000018-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 154.2941ms (74253ad3)
2025-08-27T15:13:35.6616225+02:00 8000004d-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T15:13:35.6949607+02:00 8000004d-0002-fc00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T15:13:35.8721754+02:00 8000004d-0002-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T15:13:36.8894503+02:00 8000004d-0002-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T15:13:56.8648887+02:00 8000004d-0002-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("162"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T15:13:57.4703613+02:00 8000004d-0002-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("101"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T15:30:08.5648939+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T15:30:14.0860586+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T15:30:14.1587082+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T15:30:14.1637152+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T15:30:14.3268403+02:00 8000000c-0004-fa00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T15:30:17.5376536+02:00 8000000c-0004-fa00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 3233.8444ms (74253ad3)
2025-08-27T15:30:17.7443444+02:00 80000034-0003-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T15:30:17.7536350+02:00 80000023-0000-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T15:30:17.9587786+02:00 80000034-0003-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.8843ms (74253ad3)
2025-08-27T15:30:18.4413312+02:00 80000023-0000-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 687.5143ms (74253ad3)
2025-08-27T15:30:18.7922104+02:00 80000025-0000-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T15:30:18.8380592+02:00 80000025-0000-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 45.9588ms (74253ad3)
2025-08-27T15:33:41.7250711+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T15:33:41.7573433+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T15:33:41.8569878+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T15:33:42.4707383+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T15:33:51.4985418+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("385"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T15:33:52.6704485+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("59"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T15:34:15.0126451+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.id = @__p_0
LIMIT 1" (0723d8ff)
2025-08-27T15:34:18.1015845+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T15:36:37.1800613+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 174567.1492ms (afa2e885)
2025-08-27T15:36:37.1803557+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T15:36:37.1983576+02:00 8000000e-0006-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - 200 null "application/json; charset=utf-8" 175473.8358ms (74253ad3)
2025-08-27T15:37:01.8394937+02:00 80000010-0006-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T15:37:08.1900718+02:00 80000010-0006-fb00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T15:37:08.1917889+02:00 80000010-0006-fb00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T15:37:08.1969820+02:00 80000010-0006-fb00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T15:37:08.2606932+02:00 80000010-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("1"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T15:39:01.4713733+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T15:39:01.8752032+02:00 80000016-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T15:39:02.0070202+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T15:39:02.0114369+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T15:39:02.0143979+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T15:39:02.3640576+02:00 80000016-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 502.4567ms (74253ad3)
2025-08-27T15:39:02.4167001+02:00 8000000f-0004-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T15:39:02.4167215+02:00 80000036-0003-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T15:39:02.4276196+02:00 80000036-0003-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.6883ms (74253ad3)
2025-08-27T15:39:02.4736801+02:00 8000000f-0004-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 57.1548ms (74253ad3)
2025-08-27T15:39:02.6697857+02:00 8000003d-0005-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T15:39:02.7345977+02:00 8000003d-0005-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 65.0207ms (74253ad3)
2025-08-27T15:40:48.0651556+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T15:40:48.0738818+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T15:40:48.0805354+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T15:40:48.1088771+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T15:40:50.8731065+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Executed DbCommand ("138"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T15:40:51.2617125+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Executed DbCommand ("17"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T15:41:14.9138802+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T15:41:14.9282038+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 26814.2597ms (afa2e885)
2025-08-27T15:41:14.9283700+02:00 8000000e-0006-f900-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T15:41:15.0672599+02:00 8000000e-0006-f900-b63f-84710c7967bb [ERR] Failed executing DbCommand ("196"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?'"], CommandType='Text', CommandTimeout='30']"
""UPDATE \"Usuarios\" SET \"expiracionToken\" = @p0, token = @p1
WHERE id = @p2;" (627a98df)
2025-08-27T15:43:26.8644418+02:00 8000001c-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Categorias/ObtenerCategorias""" - null null (d509f86a)
2025-08-27T15:43:26.9717781+02:00 8000001c-0000-fc00-b63f-84710c7967bb [INF] Authorization failed. "These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user." (92d7f7d3)
2025-08-27T15:43:26.9821099+02:00 8000001c-0000-fc00-b63f-84710c7967bb [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2025-08-27T15:43:26.9961506+02:00 8000001c-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Categorias/ObtenerCategorias""" - 401 null null 131.9835ms (74253ad3)
2025-08-27T15:44:13.4697152+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Actividades/ObtenerActividades""" - null null (d509f86a)
2025-08-27T15:44:14.1590374+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.ActividadesController.ObtenerActividades (API)"' (500cc934)
2025-08-27T15:44:14.3147092+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerActividades\", controller = \"Actividades\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerActividades()" on controller "API.Controllers.ActividadesController" ("API"). (122b2fdf)
2025-08-27T15:44:19.6614009+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Executed DbCommand ("49"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT a.id, a.activo, a.descripcion, a.\"descripcionCorta\", a.\"fechaFin\", a.\"fechaInicio\", a.gratis, a.\"idEntidad\", a.\"idTipoActividad\", a.imagen, a.\"informacioExtra\", a.\"linkEvento\", a.\"linkFacebook\", a.\"linkInstagram\", a.\"linkYoutube\", a.nombre, a.popularidad, a.ubicación
FROM \"Actividades\" AS a" (0723d8ff)
2025-08-27T15:44:19.7811825+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Actividad, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T15:44:19.8733682+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Executed action "API.Controllers.ActividadesController.ObtenerActividades (API)" in 5558.2983ms (afa2e885)
2025-08-27T15:44:19.8743256+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.ActividadesController.ObtenerActividades (API)"' (99874f2b)
2025-08-27T15:44:19.8852711+02:00 80000010-0006-f900-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Actividades/ObtenerActividades""" - 200 null "application/json; charset=utf-8" 6415.6549ms (74253ad3)
2025-08-27T15:44:35.3844775+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Entidades/ObtenerEntidad/1""" - null null (d509f86a)
2025-08-27T15:44:35.4232450+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.EntidadesController.ObtenerEntidadById (API)"' (500cc934)
2025-08-27T15:44:35.4510849+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerEntidadById\", controller = \"Entidades\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerEntidadById(Int32)" on controller "API.Controllers.EntidadesController" ("API"). (122b2fdf)
2025-08-27T15:44:35.6842842+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT e.id, e.activo, e.descripcion, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre, e.popularidad, e.ubicacion
FROM \"Entidades\" AS e
WHERE e.id = @__p_0
LIMIT 1" (0723d8ff)
2025-08-27T15:44:35.6873556+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"Domain.Entities.Entidad"'. (605b4265)
2025-08-27T15:44:35.6957492+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Executed action "API.Controllers.EntidadesController.ObtenerEntidadById (API)" in 244.2627ms (afa2e885)
2025-08-27T15:44:35.6959725+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.EntidadesController.ObtenerEntidadById (API)"' (99874f2b)
2025-08-27T15:44:35.6970397+02:00 8000001e-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Entidades/ObtenerEntidad/1""" - 200 null "application/json; charset=utf-8" 312.6741ms (74253ad3)
2025-08-27T15:44:42.1890955+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Entidades/ObtenerEntidades""" - null null (d509f86a)
2025-08-27T15:44:42.1918176+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.EntidadesController.ObtenerEntidades (API)"' (500cc934)
2025-08-27T15:44:42.1953386+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerEntidades\", controller = \"Entidades\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerEntidades()" on controller "API.Controllers.EntidadesController" ("API"). (122b2fdf)
2025-08-27T15:44:42.2131865+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT e.id, e.activo, e.descripcion, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre, e.popularidad, e.ubicacion
FROM \"Entidades\" AS e" (0723d8ff)
2025-08-27T15:44:42.2151967+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Entidad, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T15:44:42.2166711+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Executed action "API.Controllers.EntidadesController.ObtenerEntidades (API)" in 21.2146ms (afa2e885)
2025-08-27T15:44:42.2167486+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.EntidadesController.ObtenerEntidades (API)"' (99874f2b)
2025-08-27T15:44:42.2171909+02:00 80000012-0002-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Entidades/ObtenerEntidades""" - 200 null "application/json; charset=utf-8" 28.2036ms (74253ad3)
2025-08-27T15:44:54.8595708+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Productos/ObtenerProductos""" - null null (d509f86a)
2025-08-27T15:44:54.8605783+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.ProductosController.ObtenerProductos (API)"' (500cc934)
2025-08-27T15:44:54.8646856+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerProductos\", controller = \"Productos\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerProductos()" on controller "API.Controllers.ProductosController" ("API"). (122b2fdf)
2025-08-27T15:44:54.8695397+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Obteniendo todos los productos. (ea814e3b)
2025-08-27T15:44:54.9736521+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("91"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT p.id, p.activo, p.descripcion, p.\"descripcionCorta\", p.descuento, p.disponible, p.\"idEntidad\", p.imagen, p.\"informacioExtra\", p.\"linkFacebook\", p.\"linkInstagram\", p.\"linkYoutube\", p.nombre, p.popularidad, p.precio, p.puntos
FROM \"Productos\" AS p" (0723d8ff)
2025-08-27T15:44:55.0762836+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Producto, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T15:44:55.1402618+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Executed action "API.Controllers.ProductosController.ObtenerProductos (API)" in 275.4079ms (afa2e885)
2025-08-27T15:44:55.1404325+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.ProductosController.ObtenerProductos (API)"' (99874f2b)
2025-08-27T15:44:55.1411093+02:00 80000018-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Productos/ObtenerProductos""" - 200 null "application/json; charset=utf-8" 281.603ms (74253ad3)
2025-08-27T15:45:09.4709618+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Roles/ObtenerRoles""" - null null (d509f86a)
2025-08-27T15:45:09.4720307+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.RolesController.ObtenerRoles (API)"' (500cc934)
2025-08-27T15:45:09.4757256+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerRoles\", controller = \"Roles\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerRoles()" on controller "API.Controllers.RolesController" ("API"). (122b2fdf)
2025-08-27T15:45:12.2854905+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT r.id, r.descripcion, r.nombre
FROM \"Roles\" AS r" (0723d8ff)
2025-08-27T15:45:12.2880758+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Rol, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T15:45:12.2903717+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Executed action "API.Controllers.RolesController.ObtenerRoles (API)" in 2814.5518ms (afa2e885)
2025-08-27T15:45:12.2904538+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.RolesController.ObtenerRoles (API)"' (99874f2b)
2025-08-27T15:45:12.2907973+02:00 80000020-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Roles/ObtenerRoles""" - 200 null "application/json; charset=utf-8" 2820.1806ms (74253ad3)
2025-08-27T15:45:26.1292758+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/TipoEntidades/ObtenerTipoEntidades""" - null null (d509f86a)
2025-08-27T15:45:26.1303609+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.TipoEntidadesController.ObtenerTipoEntidades (API)"' (500cc934)
2025-08-27T15:45:26.1342444+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerTipoEntidades\", controller = \"TipoEntidades\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerTipoEntidades()" on controller "API.Controllers.TipoEntidadesController" ("API"). (122b2fdf)
2025-08-27T15:45:26.1515194+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Obteniendo todos los tipos de entidad. (281e15de)
2025-08-27T15:45:26.3013786+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Executed DbCommand ("90"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.descripcion, t.nombre
FROM \"TipoEntidades\" AS t" (0723d8ff)
2025-08-27T15:45:26.3138785+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.TipoEntidad, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T15:45:26.3164920+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Executed action "API.Controllers.TipoEntidadesController.ObtenerTipoEntidades (API)" in 182.1262ms (afa2e885)
2025-08-27T15:45:26.3165746+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.TipoEntidadesController.ObtenerTipoEntidades (API)"' (99874f2b)
2025-08-27T15:45:26.3171280+02:00 80000022-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/TipoEntidades/ObtenerTipoEntidades""" - 200 null "application/json; charset=utf-8" 187.8047ms (74253ad3)
2025-08-27T15:45:39.3225991+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Usuarios/ObtenerUsuarios""" - null null (d509f86a)
2025-08-27T15:45:39.3248194+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.UsuariosController.ObtenerUsuarios (API)"' (500cc934)
2025-08-27T15:45:39.3284851+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerUsuarios\", controller = \"Usuarios\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerUsuarios()" on controller "API.Controllers.UsuariosController" ("API"). (122b2fdf)
2025-08-27T15:45:43.8029854+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Obteniendo usuarios. (16fb1155)
2025-08-27T15:45:44.6780557+02:00 80000012-0006-f900-b63f-84710c7967bb [ERR] Error obteniendo usuarios. (aa204f75)
System.Exception: Error de prueba.
   at API.Controllers.UsuariosController.ObtenerUsuarios() in C:\Users\David\Desktop\API\Controllers\UsuariosController.cs:line 37
2025-08-27T15:45:46.3410948+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u" (0723d8ff)
2025-08-27T15:45:46.3439217+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.Usuario, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T15:45:46.3485638+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Executed action "API.Controllers.UsuariosController.ObtenerUsuarios (API)" in 7019.9842ms (afa2e885)
2025-08-27T15:45:46.3486426+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.UsuariosController.ObtenerUsuarios (API)"' (99874f2b)
2025-08-27T15:45:46.3490244+02:00 80000012-0006-f900-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Usuarios/ObtenerUsuarios""" - 200 null "application/json; charset=utf-8" 7026.693ms (74253ad3)
2025-08-27T17:25:53.8953295+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T17:25:58.4022762+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T17:25:58.5123043+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T17:25:58.6044124+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T17:25:58.8249673+02:00 80000010-0003-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T17:26:09.1121532+02:00 80000010-0003-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 10522.5843ms (74253ad3)
2025-08-27T17:26:14.1006154+02:00 80000024-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T17:26:14.1006219+02:00 80000015-0004-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T17:26:14.1778086+02:00 80000015-0004-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 9.8914ms (74253ad3)
2025-08-27T17:26:14.9443640+02:00 80000024-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 844.0153ms (74253ad3)
2025-08-27T17:26:15.0911581+02:00 80000053-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T17:26:15.1500986+02:00 80000053-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 59.1332ms (74253ad3)
2025-08-27T17:26:39.5155293+02:00 800000b5-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - null null (d509f86a)
2025-08-27T17:26:39.6634246+02:00 800000b5-0006-ff00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (500cc934)
2025-08-27T17:26:40.6003457+02:00 800000b5-0006-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerTiposEnvioCorreo\", controller = \"Correo\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerTiposEnvioCorreo()" on controller "API.Controllers.CorreoController" ("API"). (122b2fdf)
2025-08-27T17:27:51.1497242+02:00 800000b5-0006-ff00-b63f-84710c7967bb [INF] Executed action "API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)" in 70496.9407ms (afa2e885)
2025-08-27T17:27:51.2028279+02:00 800000b5-0006-ff00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (99874f2b)
2025-08-27T17:28:21.6438028+02:00 800000b5-0006-ff00-b63f-84710c7967bb [ERR] Ocurrió un error en la petición "/Correo/ObtenerTiposEnvioCorreo" (564da9e9)
System.InvalidOperationException: The entity type 'ActividadImagen' requires a primary key to be defined. If you intended to use a keyless entity type, call 'HasNoKey' in 'OnModelCreating'. For more information on keyless entity types, see https://go.microsoft.com/fwlink/?linkid=2141943.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNonNullPrimaryKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Infrastructure.Internal.NpgsqlModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.TipoEnvioCorreoRepository.GetAllAsync() in C:\Users\David\Desktop\Infrastructure\Repositories\TipoEnvioCorreoRepository.cs:line 20
   at API.Controllers.CorreoController.ObtenerTiposEnvioCorreo() in C:\Users\David\Desktop\API\Controllers\CorreoController .cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\David\Desktop\API\Middlewares\ExceptionMiddleware.cs:line 19
2025-08-27T17:28:21.7285545+02:00 800000b5-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - 500 null "application/json" 102213.1613ms (74253ad3)
2025-08-27T17:30:50.8685194+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T17:30:51.5933817+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T17:30:51.6034774+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T17:30:51.6058223+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T17:30:51.6166038+02:00 8000001a-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T17:30:52.4667135+02:00 80000014-0006-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T17:30:52.4667135+02:00 8000002f-0005-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T17:30:52.4687710+02:00 8000001a-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 864.0883ms (74253ad3)
2025-08-27T17:30:52.4766229+02:00 8000002f-0005-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.9796ms (74253ad3)
2025-08-27T17:30:52.5184096+02:00 80000014-0006-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 51.85ms (74253ad3)
2025-08-27T17:30:54.5055798+02:00 80000031-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T17:30:54.5480745+02:00 80000031-0002-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 42.7788ms (74253ad3)
2025-08-27T17:32:02.7637251+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - null null (d509f86a)
2025-08-27T17:32:02.7741856+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (500cc934)
2025-08-27T17:32:02.8417752+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerTiposEnvioCorreo\", controller = \"Correo\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerTiposEnvioCorreo()" on controller "API.Controllers.CorreoController" ("API"). (122b2fdf)
2025-08-27T17:32:16.1611483+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("109"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.descripcion, t.nombre
FROM \"TipoEnvioCorreos\" AS t" (0723d8ff)
2025-08-27T17:32:16.4149897+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.TipoEnvioCorreo, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T17:32:16.4845898+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Executed action "API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)" in 13637.3897ms (afa2e885)
2025-08-27T17:32:16.4852270+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (99874f2b)
2025-08-27T17:32:16.4983104+02:00 80000016-0002-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - 200 null "application/json; charset=utf-8" 13734.8507ms (74253ad3)
2025-08-27T17:32:53.7380432+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - null null (d509f86a)
2025-08-27T17:32:53.7405060+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (500cc934)
2025-08-27T17:32:53.7410829+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerTiposEnvioCorreo\", controller = \"Correo\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerTiposEnvioCorreo()" on controller "API.Controllers.CorreoController" ("API"). (122b2fdf)
2025-08-27T17:32:53.8039078+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.descripcion, t.nombre
FROM \"TipoEnvioCorreos\" AS t" (0723d8ff)
2025-08-27T17:33:37.2832754+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.TipoEnvioCorreo, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T17:33:37.2976248+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Executed action "API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)" in 43556.2807ms (afa2e885)
2025-08-27T17:33:37.2977754+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (99874f2b)
2025-08-27T17:33:37.2983642+02:00 80000018-0002-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - 200 null "application/json; charset=utf-8" 43560.6685ms (74253ad3)
2025-08-27T17:40:57.6707779+02:00 80000016-0003-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - null null (d509f86a)
2025-08-27T17:40:57.6713507+02:00 80000016-0003-fe00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (500cc934)
2025-08-27T17:40:57.6715199+02:00 80000016-0003-fe00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerTiposEnvioCorreo\", controller = \"Correo\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerTiposEnvioCorreo()" on controller "API.Controllers.CorreoController" ("API"). (122b2fdf)
2025-08-27T17:40:57.8480638+02:00 80000016-0003-fe00-b63f-84710c7967bb [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.descripcion, t.nombre
FROM \"TipoEnvioCorreos\" AS t" (0723d8ff)
2025-08-27T17:42:57.5784370+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T17:42:58.2365097+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T17:42:58.2399882+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T17:42:58.2423823+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T17:42:58.3656934+02:00 80000059-0002-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T17:42:59.2429838+02:00 80000059-0002-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 885.5008ms (74253ad3)
2025-08-27T17:42:59.3021131+02:00 80000023-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T17:42:59.3138619+02:00 800000b7-0006-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T17:42:59.3140252+02:00 80000023-0000-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.5395ms (74253ad3)
2025-08-27T17:42:59.4861414+02:00 800000b7-0006-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 172.2554ms (74253ad3)
2025-08-27T17:42:59.6808675+02:00 80000025-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T17:42:59.7402326+02:00 80000025-0000-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 59.4984ms (74253ad3)
2025-08-27T17:43:59.1394129+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - null null (d509f86a)
2025-08-27T17:43:59.1680355+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (500cc934)
2025-08-27T17:43:59.2108686+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Route matched with "{action = \"ObtenerTiposEnvioCorreo\", controller = \"Correo\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerTiposEnvioCorreo()" on controller "API.Controllers.CorreoController" ("API"). (122b2fdf)
2025-08-27T17:44:01.4812239+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.descripcion, t.nombre
FROM \"TipoEnvioCorreos\" AS t" (0723d8ff)
2025-08-27T17:44:09.1626825+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Domain.Entities.TipoEnvioCorreo, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-08-27T17:44:09.2511455+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Executed action "API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)" in 10032.9867ms (afa2e885)
2025-08-27T17:44:09.2520427+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.CorreoController.ObtenerTiposEnvioCorreo (API)"' (99874f2b)
2025-08-27T17:44:09.2697014+02:00 80000018-0003-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/Correo/ObtenerTiposEnvioCorreo""" - 200 null "application/json; charset=utf-8" 10130.4018ms (74253ad3)
2025-08-27T18:16:42.0715422+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T18:16:47.3495698+02:00 8000001d-0001-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T18:16:47.8633832+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T18:16:48.1125011+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T18:16:48.1178664+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T18:16:53.6482645+02:00 8000001d-0001-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 6470.5781ms (74253ad3)
2025-08-27T18:16:59.8724001+02:00 8000002a-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T18:16:59.8724002+02:00 80000029-0000-fd00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T18:16:59.9125946+02:00 80000029-0000-fd00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5.8317ms (74253ad3)
2025-08-27T18:17:00.4118579+02:00 8000002a-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 541.5244ms (74253ad3)
2025-08-27T18:17:00.7145511+02:00 8000002c-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T18:17:00.7473377+02:00 8000002c-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 32.867ms (74253ad3)
2025-08-27T18:41:05.9106763+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T18:41:08.8072715+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T18:41:08.8140042+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T18:41:08.8189892+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T18:41:09.1174503+02:00 8000001a-0003-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T18:41:13.1635356+02:00 8000001a-0003-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 3936.953ms (74253ad3)
2025-08-27T18:41:13.4731850+02:00 80000014-0007-fe00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T18:41:18.9002197+02:00 80000032-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T18:41:18.9116228+02:00 80000014-0007-fe00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 5434.2559ms (74253ad3)
2025-08-27T18:41:18.9559327+02:00 80000032-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 2223.5449ms (74253ad3)
2025-08-27T18:41:19.2630290+02:00 80000034-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T18:41:19.3237393+02:00 80000034-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 60.7951ms (74253ad3)
2025-08-27T18:42:22.5983658+02:00 8000001f-0004-fa00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T18:42:22.6246520+02:00 8000001f-0004-fa00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T18:42:22.7492316+02:00 8000001f-0004-fa00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T18:42:23.2509275+02:00 8000001f-0004-fa00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T18:42:58.1426720+02:00 8000001f-0004-fa00-b63f-84710c7967bb [INF] Executed DbCommand ("410"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T18:47:19.5516733+02:00  [INF] User profile is available. Using '"C:\Users\David\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-08-27T18:47:20.0310955+02:00 80000035-0002-ff00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - null null (d509f86a)
2025-08-27T18:47:20.1858380+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-08-27T18:47:20.1894780+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-08-27T18:47:20.1915538+02:00  [INF] Content root path: "C:\Users\David\Desktop\API" (cc26f24e)
2025-08-27T18:47:20.6409459+02:00 80000035-0002-ff00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 630.4437ms (74253ad3)
2025-08-27T18:47:20.6687632+02:00 80000012-0004-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-08-27T18:47:20.6687839+02:00 80000036-0000-fc00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - null null (d509f86a)
2025-08-27T18:47:20.6731217+02:00 80000012-0004-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_framework/aspnetcore-browser-refresh.js""" - 200 13742 "application/javascript; charset=utf-8" 4.1386ms (74253ad3)
2025-08-27T18:47:20.7741068+02:00 80000036-0000-fc00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 105.5497ms (74253ad3)
2025-08-27T18:47:20.8324222+02:00 80000014-0004-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-08-27T18:47:20.8813986+02:00 80000014-0004-fb00-b63f-84710c7967bb [INF] Request finished "HTTP/2" "GET" "https"://"localhost:44311""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 48.8928ms (74253ad3)
2025-08-27T18:48:28.0882766+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Request starting "HTTP/2" "POST" "https"://"localhost:44311""""/auth/login""" - "application/json" 107 (d509f86a)
2025-08-27T18:48:28.0964809+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] CORS policy execution successful. (5409d6ef)
2025-08-27T18:48:28.1094678+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executing endpoint '"API.Controllers.AuthController.Login (API)"' (500cc934)
2025-08-27T18:48:28.1425122+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Auth\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login(Domain.Entities.LoginDto)" on controller "API.Controllers.AuthController" ("API"). (122b2fdf)
2025-08-27T18:48:33.5309212+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("102"ms) [Parameters=["@__u_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u
WHERE u.nombre = @__u_0
LIMIT 2" (0723d8ff)
2025-08-27T18:48:43.6933890+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
FROM \"Usuarios\" AS u" (0723d8ff)
2025-08-27T18:49:14.3585962+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executed DbCommand ("8,525"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.id, t.activo, t.apellidos, t.contraseña, t.correo, t.\"expiracionToken\", t.\"fechaCreación\", t.\"fechaNacimiento\", t.nombre, t.puntos, t.suscrito, t.token, t.\"ultimaConexion\", t0.idrol, t0.idusuario, t0.identidad, t0.id, t0.descripcion, t0.nombre, t0.id0, t0.activo, t0.descripcion0, t0.\"fechaAlta\", t0.\"idTipoEntidad\", t0.imagen, t0.nombre0, t0.popularidad, t0.ubicacion
FROM (
    SELECT u.id, u.activo, u.apellidos, u.contraseña, u.correo, u.\"expiracionToken\", u.\"fechaCreación\", u.\"fechaNacimiento\", u.nombre, u.puntos, u.suscrito, u.token, u.\"ultimaConexion\"
    FROM \"Usuarios\" AS u
    WHERE u.id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT u0.idrol, u0.idusuario, u0.identidad, r.id, r.descripcion, r.nombre, e.id AS id0, e.activo, e.descripcion AS descripcion0, e.\"fechaAlta\", e.\"idTipoEntidad\", e.imagen, e.nombre AS nombre0, e.popularidad, e.ubicacion
    FROM \"UsuarioRoles\" AS u0
    INNER JOIN \"Roles\" AS r ON u0.idrol = r.id
    INNER JOIN \"Entidades\" AS e ON u0.identidad = e.id
) AS t0 ON t.id = t0.idusuario
ORDER BY t.id, t0.idrol, t0.idusuario, t0.identidad, t0.id" (0723d8ff)
2025-08-27T18:50:04.1721191+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-08-27T18:50:04.3034287+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executed action "API.Controllers.AuthController.Login (API)" in 96149.9153ms (afa2e885)
2025-08-27T18:50:04.3037946+02:00 8000001b-0006-fb00-b63f-84710c7967bb [INF] Executed endpoint '"API.Controllers.AuthController.Login (API)"' (99874f2b)
2025-08-27T18:50:04.3927600+02:00 8000001b-0006-fb00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("277"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?'"], CommandType='Text', CommandTimeout='30']"
""UPDATE \"Usuarios\" SET \"expiracionToken\" = @p0, token = @p1
WHERE id = @p2;" (627a98df)
